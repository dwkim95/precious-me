shadow: "너무 깊이 파고들다가 어두운 곳에서 길을 잃을 때가 있어요. 진실을 찾겠다는 강한 의지가 때로는 강박이 되기도 하죠.",
                growth: "모든 진실을 다 알 필요는 없다는 것을 받아들이세요. 때로는 모르는 것도 괜찮고, 답이 없는 질문도 있다는 것을 인정하는 것도 용기예요.",
                letter: "가장 깊고 어려운 진실을 향해서도 용감하게 나아가는 당신은 진정한 탐험가입니다.<br><br>당신의 <strong>용감한 탐구정신</strong>이 세상의 숨겨진 진실들을 밝혀내고 있어요. 그 용기를 잃지 마세요."
            },
            "abyss-wise": {
                title: "지혜로운 심연",
                subtitle: "깊은 통찰력으로 진실을 탐구하는 영혼",
                essence: "표면적인 것에 만족하지 않고 늘 더 깊은 의미를 찾으려 하는 당신은, 복잡한 상황도 본질을 꿰뚫어보는 지혜를 가진 사람입니다.",
                light: "당신은 혼란스러운 세상에서 진실을 찾아내는 탐험가입니다. 다른 사람들이 놓치는 것들을 발견하고, 복잡한 감정과 상황을 이해하는 능력이 뛰어나요. 당신의 통찰력은 많은 사람들에게 방향을 제시해줍니다.",
                shadow: "깊이 생각하다 보니 때로는 무거운 감정에 압도될 때가 있어요. 모든 것을 진지하게 받아들여서 단순한 즐거움을 놓치기도 하죠. 너무 많은 것을 보고 느끼다 보니 혼자만 무거운 짐을 지는 것 같을 때가 있어요.",
                growth: "깊이 있는 사고는 당신의 큰 장점이지만, 때로는 가벼운 마음으로 세상을 바라봐도 좋아요. 모든 것에 의미를 찾으려 하지 말고, 그저 존재하는 것만으로도 충분한 순간들을 허락해주세요.",
                letter: "가장 깊은 곳까지 탐험할 용기를 가진 당신은 진정한 탐험가입니다.<br><br>당신의 <strong>깊은 지혜</strong>가 혼란스러운 세상에 방향을 제시해주고 있어요. 그 깊이를 두려워하지 말고, 당신만이 발견할 수 있는 진실들을 계속 찾아가세요."
            },
            "abyss-free": {
                title: "자유로운 심연",
                subtitle: "깊이 있으면서도 구속받지 않는 영혼",
                essence: "깊이 있는 사고와 자유로운 정신을 동시에 가진 독특한 당신은, 진지하게 생각할 줄 알면서도 틀에 얽매이지 않는 유연함을 가진 사람입니다.",
                light: "당신은 깊이와 자유로움이라는 모순되어 보이는 두 가지를 아름답게 조화시키는 사람입니다. 진지한 통찰력을 가지면서도 고정관념에 얽매이지 않는 창의성이 있어요. 이런 조합은 정말 드물고 소중합니다.",
                shadow: "깊이 있는 생각과 자유로운 성향 사이에서 갈등할 때가 있어요. 진지해야 할지 가볍게 넘어가야 할지 헷갈리기도 하고, 이런 자신이 일관성이 없다고 느낄 수도 있어요.",
                growth: "당신의 복잡함은 약점이 아니라 특별한 강점입니다. 깊이와 자유로움을 모두 가진 것은 당신만의 독특한 매력이에요. 일관성보다는 다양성을 받아들이고, 그 변화하는 모습들을 모두 당신이라고 인정해주세요.",
                letter: "깊은 곳까지 자유롭게 탐험하는 당신은 정말 특별한 존재입니다.<br><br>깊이와 자유로움, 이 둘을 모두 가진 것은 <strong>당신만의 독특한 매력</strong>입니다. 그 모순되어 보이는 조합이 실은 당신의 가장 큰 강점입니다."
            },
            "coral-gentle": {
                title: "온화한 산호초",
                subtitle: "부드럽게 성장하며 주변을 아름답게 하는 영혼",
                essence: "꾸준하면서도 온화한 방식으로 성장하는 당신은, 경쟁보다는 협력을, 속도보다는 지속성을 중요하게 여기는 사람입니다.",
                light: "당신은 조용한 성장의 힘을 보여주는 사람입니다. 화려하지 않지만 꾸준하게, 경쟁하지 않지만 확실하게 자신만의 길을 걸어가요. 당신 주변에는 항상 따뜻하고 평화로운 분위기가 흘러요.",
                shadow: "때로는 너무 겸손해서 자신의 성취를 제대로 인정하지 않을 때가 있어요. 다른 사람을 배려하느라 자신의 필요를 뒤로 미루기도 하죠. 자신의 속도가 느리다고 생각해서 조급해할 때도 있어요.",
                growth: "당신의 온화한 성장은 세상에 꼭 필요한 방식입니다. 자신의 속도를 인정하고, 작은 성취들도 충분히 축하해주세요. 다른 사람을 배려하는 것도 좋지만, 자신에게도 그만큼 친절해주세요.",
                letter: "부드럽게 자라나며 주변을 아름답게 만드는 산호초처럼, 당신은 세상에 평화와 아름다움을 가져다주는 존재입니다.<br><br>당신의 <strong>온화한 성장</strong>이 많은 생명들에게 안식처가 되고 있어요. 서두르지 말고 계속 그렇게 아름답게 피어나세요."
            },
            "coral-brave": {
                title: "역동적인 산호초",
                subtitle: "끊임없이 성장하며 생명력을 발산하는 영혼",
                essence: "어떤 환경에서도 적응하며 성장하는 놀라운 생명력을 가진 당신은, 목표를 향해 꾸준히 나아가는 의지력과 주변 사람들을 격려하는 따뜻함을 가진 사람입니다.",
                light: "당신은 희망과 성장의 상징입니다. 어려운 상황에서도 포기하지 않는 끈기와 다른 사람들에게 용기를 주는 에너지가 있어요. 당신이 있는 곳은 늘 활기차고 긍정적인 분위기가 흘러요.",
                shadow: "너무 많은 것을 완벽하게 하려다가 스스로에게 과도한 압박을 주기도 해요. 쉬는 것을 게으름이라고 생각하거나, 성과가 바로 나오지 않으면 불안해하기도 하죠. 항상 무언가를 이뤄야 한다는 강박이 있을 수 있어요.",
                growth: "성장도 중요하지만, 지금 이 순간의 자신도 충분히 소중하다는 것을 기억하세요. 완벽하지 않아도 괜찮고, 때로는 그냥 쉬어가는 것도 성장의 한 과정이라는 것을 받아들여주세요.",
                letter: "어떤 환경에서도 아름답게 피어나는 산고초처럼, 당신은 희망과 생명력의 상징입니다.<br><br>당신의 <strong>끊임없는 성장</strong>과 다른 사람들을 응원하는 마음이 세상을 더 밝게 만들어주고 있어요. 당신의 속도로 천천히 자라가세요."
            },
            "coral-wise": {
                title: "지혜로운 산고초",
                subtitle: "성장하며 깊은 통찰을 쌓아가는 영혼",
                essence: "꾸준한 성장과 깊은 지혜를 동시에 추구하는 당신은, 경험을 통해 배우고 그 배움을 바탕으로 더 나은 방향으로 나아가는 사람입니다.",
                light: "당신은 성장과 지혜가 조화를 이루는 사람입니다. 단순히 앞만 보고 달리는 것이 아니라, 경험에서 교훈을 얻고 그것을 바탕으로 더 현명하게 성장해요. 당신의 성숙한 발전은 많은 사람들에게 영감을 줍니다.",
                shadow: "완벽하게 이해하고 성장하려는 욕구가 때로는 부담이 될 수 있어요. 모든 경험에서 의미를 찾으려 하다가 단순한 즐거움을 놓치기도 하죠.",
                growth: "성장도 지혜도 중요하지만, 때로는 그냥 현재를 즐기는 것도 필요해요. 모든 순간이 배움이 될 필요는 없어요. 가끔은 의미를 찾지 말고 그냥 경험 자체를 즐겨보세요.",
                letter: "끊임없이 성장하면서도 깊은 지혜를 쌓아가는 산고초처럼, 당신은 발전과 성찰의 아름다운 균형을 이루고 있습니다.<br><br>당신의 <strong>지혜로운 성장</strong>이 많은 사람들에게 진정한 발전이 무엇인지 보여주고 있어요."
            },
            "coral-free": {
                title: "자유로운 산고초",
                subtitle: "활력 넘치며 구속받지 않는 영혼",
                essence: "성장의 활력과 자유로운 정신을 동시에 가진 당신은, 자신만의 방식으로 발전하며 새로운 가능성을 열어가는 사람입니다.",
                light: "당신은 자유로운 성장의 아름다움을 보여주는 사람입니다. 정해진 틀에 얽매이지 않고 자신만의 방식으로 발전해나가는 모습이 많은 사람들에게 용기를 줘요. 당신의 활력은 주변을 밝게 만듭니다.",
                shadow: "자유로운 성장을 추구하다 보니 때로는 일관성이 부족해 보일 수 있어요. 너무 많은 방향으로 에너지를 분산시켜서 집중력이 떨어질 때도 있죠.",
                growth: "자유로운 성장도 좋지만, 때로는 방향을 정하고 집중하는 것도 필요해요. 모든 가능성을 다 추구할 필요는 없다는 것을 기억하세요.",
                letter: "자유롭게 뻗어나가며 생명력을 발산하는 산고초처럼, 당신은 세상에 새로운 성장의 가능성을 보여주는 존재입니다.<br><br>당신의 <strong>자유로운 성장</strong>이 많은 사람들에게 다양한 길이 있음을 알려주고 있어요."
            }
        };

        // 로딩 메시지
        const loadingMessages = [
            "마음의 깊은 곳에서 당신만의 보물을 발견했습니다",
            "당신의 진실한 모습이 서서히 드러나고 있어요",
            "심해에서 온 특별한 메시지를 준비하고 있습니다",
            "당신만의 고유한 빛깔을 찾고 있어요"
        ];

        // 배경 효과 생성
        function createBackgroundEffects() {
            function createWaterDrop() {
                try {
                    const drop = document.createElement('div');
                    drop.className = 'water-drop';
                    drop.style.left = Math.random() * 100 + 'vw';
                    drop.style.animationDuration = (Math.random() * 3 + 4) + 's';
                    drop.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(drop);
                    
                    setTimeout(() => {
                        if (drop.parentNode) drop.remove();
                    }, 7000);
                } catch (error) {
                    console.warn('물방울 효과 생성 실패:', error);
                }
            }

            function createShootingStar() {
                try {
                    const star = document.createElement('div');
                    star.className = 'shooting-star';
                    star.style.left = Math.random() * 50 + 'vw';
                    star.style.top = Math.random() * 50 + 'vh';
                    star.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    document.body.appendChild(star);
                    
                    setTimeout(() => {
                        if (star.parentNode) star.remove();
                    }, 5000);
                } catch (error) {
                    console.warn('별똥별 효과 생성 실패:', error);
                }
            }

            setInterval(createWaterDrop, 2000);
            setInterval(createShootingStar, 8000);
            
            // 초기 효과
            for(let i = 0; i < 3; i++) {
                setTimeout(createWaterDrop, i * 800);
            }
        }

        // 향상된 오디오 시스템
        function createOceanSound() {
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                // 기존 오실레이터 정리
                currentOscillators.forEach(osc => {
                    try { 
                        osc.stop(); 
                    } catch(e) {
                        console.warn('오실레이터 정지 실패:', e);
                    }
                });
                currentOscillators = [];
                
                const frequencies = [60, 120, 180, 240];
                const masterGain = audioContext.createGain();
                masterGain.gain.value = 0.08;
                
                frequencies.forEach((freq, index) => {
                    const oscillator = audioContext.createOscillator();
                    const oscGain = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.value = freq;
                    oscGain.gain.value = 0.3 / (index + 1);
                    
                    // LFO 추가
                    const lfo = audioContext.createOscillator();
                    const lfoGain = audioContext.createGain();
                    lfo.type = 'sine';
                    lfo.frequency.value = 0.1 + (index * 0.05);
                    lfoGain.gain.value = freq * 0.1;
                    
                    lfo.connect(lfoGain);
                    lfoGain.connect(oscillator.frequency);
                    
                    oscillator.connect(oscGain);
                    oscGain.connect(masterGain);
                    
                    oscillator.start();
                    lfo.start();
                    
                    currentOscillators.push(oscillator, lfo);
                });
                
                masterGain.connect(audioContext.destination);
                return masterGain;
            } catch (error) {
                console.warn('오디오 생성 실패:', error);
                return null;
            }
        }

        function initAudio() {
            const audioControl = document.getElementById('audioControl');
            const audioIcon = document.getElementById('audioIcon');
            
            function toggleAudio() {
                if (!isMusicPlaying) {
                    (async () => {
                        try {
                            if (audioContext && audioContext.state === 'suspended') {
                                await audioContext.resume();
                            }
                            
                            const gainNode = createOceanSound();
                            if (gainNode) {
                                isMusicPlaying = true;
                                audioIcon.textContent = '🌊';
                                audioControl.classList.add('playing');
                                audioControl.setAttribute('aria-label', '배경음악 정지');
                            }
                        } catch (error) {
                            console.warn('오디오 시작 실패:', error);
                        }
                    })();
                } else {
                    try {
                        currentOscillators.forEach(osc => {
                            try { osc.stop(); } catch(e) {}
                        });
                        currentOscillators = [];
                        isMusicPlaying = false;
                        audioIcon.textContent = '🎵';
                        audioControl.classList.remove('playing');
                        audioControl.setAttribute('aria-label', '배경음악 재생');
                    } catch (error) {
                        console.warn('오디오 정지 실패:', error);
                    }
                }
            }

            audioControl.addEventListener('click', toggleAudio);
            audioControl.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleAudio();
                }
            });
        }

        // 핵심 함수들
        function startJourney() {
            if (gameState.isTransitioning) return;
            gameState.isTransitioning = false;
            showStory();
        }

        function showStory() {
            if (gameState.currentStory < stories.length) {
                const story = stories[gameState.currentStory];
                document.getElementById('storyTitle').textContent = story.title;
                document.getElementById('storyText').innerHTML = story.text;
                
                showScreen('storyScreen');
                gameState.currentStory++;
            } else {
                showQuestion();
            }
        }

        function continueJourney() {
            if (gameState.isTransitioning) return;
            gameState.isTransitioning = false;
            
            if (gameState.currentDepth < questions.length) {
                showQuestion();
            } else {
                showStory();
            }
        }

        function showQuestion() {
            if (gameState.currentDepth >= questions.length) {
                showLoading();
                return;
            }

            const question = questions[gameState.currentDepth];
            
            // 진행도 업데이트
            const progress = ((gameState.currentDepth + 1) / questions.length) * 100;
            const progressFill = document.getElementById('progressFill');
            const progressBar = progressFill.parentElement;
            
            progressFill.style.width = progress + '%';
            progressBar.setAttribute('aria-valuenow', Math.round(progress));
            document.getElementById('depthIndicator').textContent = `수심 ${question.depth}m`;
            
            // 질문 표시
            document.getElementById('questionText').textContent = question.text;
            
            // 선택지 생성
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option.text;
                button.setAttribute('role', 'radio');
                button.setAttribute('aria-checked', 'false');
                button.setAttribute('tabindex', index === 0 ? '0' : '-1');
                
                button.addEventListener('click', () => {
                    handleOptionClick(option.type, index);
                });
                
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleOptionClick(option.type, index);
                    }
                });
                
                optionsContainer.appendChild(button);
            });
            
            showScreen('questionScreen');
            gameState.isTransitioning = false;
        }

        function handleOptionClick(type, index) {
            if (gameState.isTransitioning) return;
            gameState.isTransitioning = true;

            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach((btn, i) => {
                btn.disabled = true;
                btn.style.pointerEvents = 'none';
                btn.setAttribute('aria-checked', 'false');
                
                if (i !== index) {
                    btn.style.opacity = '0.3';
                } else {
                    btn.classList.add('selected');
                    btn.setAttribute('aria-checked', 'true');
                }
            });
            
            // 점수 추가
            if (gameState.scores.hasOwnProperty(type)) {
                gameState.scores[type]++;
            }
            gameState.responses.push(type);
            
            setTimeout(() => {
                gameState.currentDepth++;
                
                if (gameState.currentDepth < questions.length) {
                    if (gameState.currentDepth % 3 === 0 && gameState.currentStory < stories.length) {
                        showStory();
                    } else {
                        showQuestion();
                    }
                } else {
                    showLoading();
                }
            }, 400);
        }

        function showLoading() {
            const messages = loadingMessages;
            let messageIndex = 0;
            
            const messageElement = document.getElementById('loadingMessage');
            messageElement.textContent = messages[messageIndex];
            
            showScreen('loadingScreen');
            
            const interval = setInterval(() => {
                messageIndex = (messageIndex + 1) % messages.length;
                messageElement.textContent = messages[messageIndex];
            }, 2000);
            
            setTimeout(() => {
                clearInterval(interval);
                showResult();
            }, 6000);
        }

        function showResult() {
            const resultKey = calculateResultType();
            const result = results[resultKey] || results["pearl-gentle"];
            
            // 결과 표시
            document.getElementById('resultTitle').textContent = result.title;
            document.getElementById('resultSubtitle').textContent = result.subtitle;
            document.getElementById('essenceText').textContent = result.essence;
            document.getElementById('lightSide').textContent = result.light;
            document.getElementById('shadowSide').textContent = result.shadow;
            document.getElementById('growthPath').textContent = result.growth;
            document.getElementById('letterContent').innerHTML = result.letter;
            
            showScreen('resultScreen');
            
            // 결과 저장
            window.mindDiveResult = {
                type: resultKey,
                result: result,
                responses: gameState.responses,
                scores: gameState.scores,
                timestamp: new Date().toISOString()
            };
        }

        function calculateResultType() {
            const scores = gameState.scores;
            
            const mainTypes = ['pearl', 'current', 'abyss', 'coral'];
            const subTypes = ['gentle', 'brave', 'wise', 'free'];
            
            const mainMax = Math.max(...mainTypes.map(type => scores[type]));
            const subMax = Math.max(...subTypes.map(type => scores[type]));
            
            const mainType = mainTypes.find(type => scores[type] === mainMax);
            const subType = subTypes.find(type => scores[type] === subMax);
            
            const resultKey = `${mainType}-${subType}`;
            
            if (results[resultKey]) {
                return resultKey;
            }
            
            // 대체 로직
            const alternatives = [
                `${subType}-${mainType}`,
                `${mainType}-gentle`,
                'pearl-gentle'
            ];
            
            for (const alt of alternatives) {
                if (results[alt]) {
                    return alt;
                }
            }
            
            return 'pearl-gentle';
        }

        function showScreen(screenId) {
            try {
                const allScreens = document.querySelectorAll('.screen');
                allScreens.forEach(screen => {
                    screen.classList.add('hidden');
                });
                
                const targetScreen = document.getElementById(screenId);
                if (targetScreen) {
                    targetScreen.classList.remove('hidden');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            } catch (error) {
                console.error('화면 전환 중 오류:', error);
            }
        }

        // 공유 기능들
        function shareKakao() {
            const resultData = window.mindDiveResult;
            if (!resultData) return;
            
            const text = `MIND DIVE에서 발견한 나의 모습: ${resultData.result.title}\n\n${resultData.result.subtitle}\n\n당신도 마음의 심해로 여행을 떠나보세요.`;
            
            if (typeof Kakao !== 'undefined' && Kakao.Link) {
                try {
                    Kakao.Link.sendDefault({
                        objectType: 'text',
                        text: text,
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href,
                        },
                    });
                } catch (error) {
                    console.warn('카카오톡 공유 실패:', error);
                    copyToClipboard(text + '\n' + window.location.href);
                    alert('카카오톡 링크가 클립보드에 복사되었습니다!');
                }
            } else {
                copyToClipboard(text + '\n' + window.location.href);
                alert('카카오톡 링크가 클립보드에 복사되었습니다!');
            }
        }

        function shareResult() {
            const resultData = window.mindDiveResult;
            if (!resultData) return;
            
            const text = `MIND DIVE에서 발견한 나의 모습: ${resultData.result.title}\n\n${resultData.result.subtitle}\n\n당신도 마음의 심해로 여행을 떠나보세요.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'MIND DIVE 결과',
                    text: text,
                    url: window.location.href
                }).catch(error => {
                    console.warn('웹 공유 실패:', error);
                    copyToClipboard(text + '\n' + window.location.href);
                    alert('결과가 클립보드에 복사되었습니다!');
                });
            } else {
                copyToClipboard(text + '\n' + window.location.href);
                alert('결과가 클립보드에 복사되었습니다!');
            }
        }

        function copyLink() {
            copyToClipboard(window.location.href);
            alert('링크가 클립보드에 복사되었습니다!');
        }

        function copyToClipboard(text) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).catch(error => {
                    console.warn('클립보드 API 실패:', error);
                    fallbackCopyTextToClipboard(text);
                });
            } else {
                fallbackCopyTextToClipboard(text);
            }
        }        // 전역 상태 관리
        const gameState = {
            currentDepth: 0,
            currentStory: 0,
            responses: [],
            isTransitioning: false,
            scores: {
                pearl: 0, current: 0, abyss: 0, coral: 0,
                gentle: 0, brave: 0, wise: 0, free: 0
            }
        };

        // 오디오 관리
        let audioContext = null;
        let isMusicPlaying = false;
        let currentOscillators = [];

        // 스토리 데이터
        const stories = [
            {
                title: "심해로의 입수",
                text: "수면이 당신을 부드럽게 감싸줍니다.<br><br>처음엔 누구나 망설입니다. 괜찮아요.<br><em>천천히, 자연스럽게.</em><br><br>당신만의 속도로 가면 됩니다."
            },
            {
                title: "첫 번째 깊이",
                text: "햇살이 물속으로 스며들어<br>온화한 빛줄기를 만들고 있어요.<br><br>여기서 잠시 머물러도 괜찮습니다.<br><em>서두르지 마세요.</em>"
            },
            {
                title: "조금 더 깊은 곳으로",
                text: "빛이 조금씩 부드러워지고 있네요.<br><br>이 고요함이 낯설어도 괜찮아요.<br>당신은 <em>충분히 안전</em>합니다."
            },
            {
                title: "중간 지점",
                text: "여기까지 온 당신이 놀라워요.<br><br>주변이 조금 어두워졌지만<br>당신 안의 빛은 <em>더욱 선명해지고</em> 있어요."
            },
            {
                title: "더 깊은 마음으로",
                text: "정적이 당신을 감싸고 있습니다.<br><br>이 고요함 속에서<br>당신의 진실한 목소리에 <em>귀 기울여보세요.</em>"
            },
            {
                title: "마음의 바닥 근처",
                text: "거의 다 왔어요.<br><br>여기까지 용기 내어 내려온 당신,<br>정말 <em>용감한 사람</em>이에요."
            }
        ];

        // 질문 데이터
        const questions = [
            {
                depth: 10,
                text: "친구들과 함께 있을 때\n당신은 주로 어떤 모습인가요?",
                options: [
                    { text: "조용히 듣고 있다가 필요할 때 말해요", type: "gentle" },
                    { text: "재미있는 이야기나 새로운 제안을 해요", type: "brave" },
                    { text: "진지한 대화나 깊은 주제를 좋아해요", type: "wise" },
                    { text: "분위기에 따라 자연스럽게 바뀌어요", type: "free" }
                ]
            },
            {
                depth: 50,
                text: "마음이 복잡할 때\n가장 먼저 하고 싶은 일은?",
                options: [
                    { text: "혼자만의 조용한 공간에서 마음을 다스려요", type: "pearl" },
                    { text: "뭔가 활동적인 걸 하며 에너지를 바꿔요", type: "coral" },
                    { text: "왜 이런 감정인지 깊이 들여다봐요", type: "abyss" },
                    { text: "평소와 전혀 다른 걸 해보며 흘려보내요", type: "current" }
                ]
            },
            {
                depth: 120,
                text: "카페에서 혼자 앉아 있을 때\n주로 무엇을 하고 있나요?",
                options: [
                    { text: "창밖을 보며 조용히 생각에 잠겨있어요", type: "gentle" },
                    { text: "할 일을 정리하거나 계획을 세우고 있어요", type: "brave" },
                    { text: "사람들을 관찰하며 이런저런 상상을 해요", type: "wise" },
                    { text: "그때그때 기분에 따라 달라져요", type: "free" }
                ]
            },
            {
                depth: 200,
                text: "소중한 사람이 힘들어할 때\n당신의 첫 반응은?",
                options: [
                    { text: "조용히 곁에 있어주며 위로해요", type: "pearl" },
                    { text: "함께 해결방법을 찾아보자고 해요", type: "coral" },
                    { text: "진심으로 그 마음을 이해하려고 해요", type: "abyss" },
                    { text: "그 순간 필요한 걸 자연스럽게 해줘요", type: "current" }
                ]
            },
            {
                depth: 300,
                text: "새로운 환경에 적응해야 할 때\n당신은 어떤 타입인가요?",
                options: [
                    { text: "천천히 익숙해질 때까지 기다려요", type: "gentle" },
                    { text: "적극적으로 배우고 적응하려고 해요", type: "brave" },
                    { text: "왜 이런 변화가 필요한지부터 생각해요", type: "wise" },
                    { text: "일단 경험해보며 자연스럽게 흘러가요", type: "free" }
                ]
            },
            {
                depth: 450,
                text: "밤늦게 잠들기 전\n마지막에 드는 생각은?",
                options: [
                    { text: "오늘 하루도 고생했구나, 내일은 더 평온했으면", type: "pearl" },
                    { text: "내일은 뭘 해볼까, 어떻게 더 나아질까", type: "coral" },
                    { text: "오늘 있었던 일들의 의미를 되짚어봐요", type: "abyss" },
                    { text: "내일은 또 어떤 하루가 될까 궁금해요", type: "current" }
                ]
            },
            {
                depth: 600,
                text: "가장 소중한 사람과 헤어져야 한다면\n어떤 마음이 들까요?",
                options: [
                    { text: "조용히 받아들이고 오래 그리워할 것 같아요", type: "gentle" },
                    { text: "슬프지만 서로의 성장을 위해 응원할게요", type: "brave" },
                    { text: "왜 헤어져야 하는지 깊이 생각해볼 것 같아요", type: "wise" },
                    { text: "슬프지만 새로운 만남도 기대할 것 같아요", type: "free" }
                ]
            },
            {
                depth: 750,
                text: "인생에서 가장 중요하다고 생각하는 것은?",
                options: [
                    { text: "마음의 평화와 안정감", type: "pearl" },
                    { text: "꾸준한 성장과 발전", type: "coral" },
                    { text: "진실한 관계와 깊은 이해", type: "abyss" },
                    { text: "자유로움과 새로운 경험", type: "current" }
                ]
            },
            {
                depth: 900,
                text: "10년 후의 나에게 하고 싶은 말은?",
                options: [
                    { text: "지금보다 더 평온하고 행복하길 바라", type: "gentle" },
                    { text: "꿈꿔왔던 모든 걸 이뤘으면 좋겠어", type: "brave" },
                    { text: "지금의 고민들이 어떤 의미였는지 알려줘", type: "wise" },
                    { text: "어떤 모습이든 그때의 너를 응원할게", type: "free" }
                ]
            },
            {
                depth: 1050,
                text: "지금 이 순간 가장 필요한 것은?",
                options: [
                    { text: "따뜻한 위로와 충분한 휴식", type: "pearl" },
                    { text: "새로운 동기와 도전할 용기", type: "coral" },
                    { text: "나 자신에 대한 깊은 이해", type: "abyss" },
                    { text: "마음 편히 흘러갈 수 있는 자유", type: "current" }
                ]
            },
            {
                depth: 1200,
                text: "마지막 질문입니다.\n당신이 가장 소중히 간직하고 싶은 것은?",
                options: [
                    { text: "지금까지 쌓아온 소중한 추억들", type: "gentle" },
                    { text: "더 나은 내일을 만들어갈 희망", type: "brave" },
                    { text: "진실된 마음과 깊은 감정들", type: "wise" },
                    { text: "언제나 변화할 수 있는 가능성", type: "free" }
                ]
            }
        ];

        // 완전한 결과 데이터 (16가지 조합)
        const results = {
            "pearl-gentle": {
                title: "온화한 진주",
                subtitle: "고요함 속에서 따뜻한 빛을 품은 영혼",
                essence: "평온함과 온화함이 어우러진 당신은, 세상의 소음 속에서도 중심을 잃지 않는 사람입니다. 조용하지만 확고한 내면의 힘을 가지고 있어요.",
                light: "당신은 혼란스러운 세상에 안정감을 선사하는 존재입니다. 말없는 위로와 온화한 미소로 많은 사람들의 마음을 어루만져 주고 있어요. 당신 곁에 있으면 자연스럽게 마음이 차분해지고 평온해집니다.",
                shadow: "때로는 너무 많은 것을 혼자 감당하려 해서 지칠 때가 있어요. 자신의 감정을 표현하는 것을 어려워하기도 하죠. 다른 사람을 배려하느라 정작 자신의 마음은 뒤로 미루곤 합니다.",
                growth: "당신에게 필요한 것은 자신의 감정에도 귀 기울이는 시간입니다. 다른 사람을 돌보는 만큼 자신도 소중히 여기세요. 때로는 도움을 요청하는 것도 용기라는 것을 기억해주세요.",
                letter: "고요한 바다 깊은 곳에서 오랜 시간 빛을 키워온 진주처럼, 당신은 세상에 평화를 가져다주는 소중한 존재입니다.<br><br>당신의 <strong>부드러운 힘</strong>이 이 세상을 더 따뜻하게 만들어주고 있어요. 급하지 않게, 천천히 자신만의 속도로 빛나는 당신이 아름답습니다."
            },
            "pearl-brave": {
                title: "용기 있는 진주",
                subtitle: "평화로우면서도 강인한 의지를 가진 영혼",
                essence: "평온함과 용기를 동시에 가진 균형잡힌 당신은, 필요할 때는 과감하게 행동하면서도 마음의 평화를 잃지 않는 사람입니다.",
                light: "당신은 조용한 카리스마를 가진 사람입니다. 평소에는 차분하지만, 중요한 순간에는 앞장서서 길을 제시해요. 이런 당신의 모습이 많은 사람들에게 신뢰감과 안정감을 동시에 줍니다.",
                shadow: "완벽해 보이려는 압박감을 스스로에게 주기도 해요. 항상 강해야 한다고 생각해서 자신의 약한 모습을 숨기려 할 때가 있어요. 때로는 쉬어가는 것도 필요하다는 것을 인정하기 어려워하죠.",
                growth: "완벽하지 않아도 괜찮다는 것을 받아들이세요. 당신의 진짜 강함은 약함을 인정할 수 있는 용기에서 나옵니다. 가끔은 방향타를 놓고 파도에 몸을 맡겨보세요.",
                letter: "고요한 힘과 용감한 마음을 함께 가진 당신은 정말 드문 존재입니다.<br><br>평화를 사랑하면서도 <strong>필요할 때는 앞장서는 용기</strong>를 가진 당신이 멋져요. 당신만의 균형감각을 계속 믿어주세요."
            },
            "pearl-wise": {
                title: "지혜로운 진주",
                subtitle: "깊은 사유와 고요한 힘을 가진 영혼",
                essence: "조용하지만 깊은 지혜를 가진 당신은, 말보다는 행동으로, 화려함보다는 진정성으로 사람들에게 감동을 주는 사람입니다.",
                light: "당신은 조용한 카리스마를 가진 사람입니다. 깊이 있는 생각과 신중한 판단력으로 많은 사람들의 신뢰를 받아요. 당신의 침착함과 통찰력은 복잡한 상황에서 길잡이가 되어줍니다.",
                shadow: "혼자만의 시간이 너무 많아서 외로움을 느낄 때가 있어요. 자신의 생각이 너무 복잡하다고 여겨서 다른 사람들과 소통하는 것을 어려워하기도 하죠.",
                growth: "당신의 깊은 생각들을 다른 사람들과 나누어보세요. 완벽하지 않아도 괜찮다는 것을 받아들이고, 때로는 직감을 믿고 행동해보는 것도 좋아요.",
                letter: "오랜 시간 깊은 곳에서 지혜를 쌓아온 진주처럼, 당신은 정말 소중한 존재입니다.<br><br>당신의 <strong>조용한 지혜</strong>가 시끄러운 세상에 꼭 필요한 목소리가 되고 있어요. 당신의 깊이를 자랑스러워하세요."
            },
            "pearl-free": {
                title: "자유로운 진주",
                subtitle: "고요함 속에서도 자유로운 영혼을 간직한 존재",
                essence: "평온함을 사랑하면서도 어떤 것에도 얽매이지 않는 자유로운 정신을 가진 당신은, 조용하지만 결코 수동적이지 않은 사람입니다.",
                light: "당신은 평온함과 자유로움이라는 아름다운 조합을 가진 사람입니다. 조용하지만 강인하고, 평화로우면서도 독립적이에요. 필요할 때는 과감하게 자신만의 길을 선택할 줄 아는 용기가 있어요.",
                shadow: "평온함과 자유로움 사이에서 균형을 찾기 어려울 때가 있어요. 때로는 안정을 원하다가도 또 변화를 갈망하게 되어 혼란스러울 수 있어요.",
                growth: "평온함과 자유로움을 동시에 추구하는 것은 당신만의 특별한 지혜입니다. 때로는 머물고 때로는 떠나는 것, 그 모든 선택이 당신의 자유예요.",
                letter: "고요한 바다 속을 자유롭게 유영하는 진주처럼, 당신은 독특하고 아름다운 존재입니다.<br><br>평온함과 자유로움을 동시에 추구하는 것은 <strong>당신만의 특별한 지혜</strong>입니다. 그 균형을 찾아가는 여정을 즐기세요."
            },
            "current-gentle": {
                title: "온화한 해류",
                subtitle: "부드럽게 흐르며 주변을 감싸주는 영혼",
                essence: "변화를 받아들이면서도 온화한 방식으로 흘러가는 당신은, 급하지 않게 자연스럽게 변화하며 주변에 평온함을 주는 사람입니다.",
                light: "당신은 부드러운 변화의 힘을 보여주는 사람입니다. 급작스럽지 않게, 강제하지 않게, 자연스럽게 흘러가면서도 확실한 변화를 만들어내요. 당신의 온화한 에너지는 많은 사람들에게 안정감을 줍니다.",
                shadow: "때로는 너무 부드러워서 변화의 속도가 느릴 수 있어요. 다른 사람들을 배려하느라 자신이 원하는 방향으로 가지 못할 때도 있죠.",
                growth: "온화함도 큰 힘이라는 것을 기억하세요. 때로는 좀 더 적극적으로 자신의 의견을 표현해도 괜찮아요. 부드러운 변화가 때로는 가장 지속 가능하고 건강한 변화라는 것을 믿으세요.",
                letter: "부드럽게 흘러가며 모든 것을 감싸주는 온화한 해류처럼, 당신은 세상에 평화로운 변화를 가져다주는 존재입니다.<br><br>당신의 <strong>온화한 흐름</strong>이 많은 사람들에게 편안함과 치유를 주고 있어요."
            },
            "current-brave": {
                title: "역동적인 해류",
                subtitle: "용기 있게 새로운 길을 개척하는 영혼",
                essence: "변화를 두려워하지 않을 뿐만 아니라 적극적으로 새로운 기회를 만들어내는 당신은, 도전정신과 개척자의 마음을 가진 사람입니다.",
                light: "당신은 변화의 선구자입니다. 남들이 가지 않은 길도 용감하게 걸어가며, 새로운 가능성을 열어보이는 사람이에요. 당신의 도전정신과 추진력은 많은 사람들에게 용기를 줍니다.",
                shadow: "때로는 너무 빠르게 변화하려다가 주변 사람들이 따라오기 어려워할 때가 있어요. 혼자 앞서 나가다가 외로움을 느끼기도 하죠.",
                growth: "변화와 도전도 중요하지만, 때로는 주변 사람들과 보조를 맞추는 것도 필요해요. 혼자만의 속도가 아니라 함께 가는 속도를 생각해보세요.",
                letter: "새로운 길을 개척하는 용감한 해류처럼, 당신은 세상에 변화의 바람을 일으키는 사람입니다.<br><br>당신의 <strong>용감한 도전정신</strong>이 많은 사람들에게 가능성을 보여주고 있어요. 계속 흘러가세요, 당신만의 길을 만들면서요."
            },
            "current-wise": {
                title: "지혜로운 해류",
                subtitle: "변화 속에서도 깊은 통찰을 가진 영혼",
                essence: "끊임없이 변화하면서도 그 속에서 의미와 패턴을 찾아내는 지혜로운 당신은, 경험을 통해 배우고 성장하는 능력이 뛰어난 사람입니다.",
                light: "당신은 변화와 성찰의 완벽한 조화를 이루는 사람입니다. 새로운 경험을 두려워하지 않으면서도, 그 경험들로부터 깊은 깨달음을 얻어요. 당신의 흐르는 지혜는 많은 사람들에게 방향을 제시해줍니다.",
                shadow: "너무 깊이 생각하다 보니 변화의 속도가 느려질 때가 있어요. 모든 것을 분석하고 이해하려다가 기회를 놓치기도 하죠.",
                growth: "완벽한 이해를 기다리지 말고 때로는 경험하면서 배워가세요. 당신의 지혜는 행동 속에서도 빛을 발할 수 있어요.",
                letter: "흘러가면서도 깊은 지혜를 간직한 해류처럼, 당신은 변화와 성찰의 완벽한 조화를 이루고 있습니다.<br><br>당신의 <strong>흐르는 지혜</strong>가 변화하는 세상에 방향을 제시해주고 있어요. 계속 흘러가세요, 당신만의 깊이를 가지고요."
            },
            "current-free": {
                title: "자유로운 해류",
                subtitle: "끊임없이 흐르며 새로운 길을 만드는 영혼",
                essence: "변화를 두려워하지 않는 자유로운 당신은, 새로운 것에 대한 호기심과 고정관념에 얽매이지 않는 유연함을 가진 사람입니다.",
                light: "당신은 세상에 새로운 바람을 불러오는 사람입니다. 창의적인 아이디어와 열린 마음으로 많은 사람들에게 영감을 주어요. 당신이 있는 곳에는 늘 새로운 가능성이 움틉니다.",
                shadow: "때로는 너무 많은 변화를 추구하다가 정작 중요한 것을 놓치기도 해요. 끊임없이 움직이다 보니 지칠 때도 있고, 한 곳에 깊이 뿌리내리는 것을 어려워하기도 하죠.",
                growth: "변화도 소중하지만, 때로는 멈춰서 깊이 들여다보는 시간도 필요해요. 자유로움 속에서도 자신만의 중심을 찾아보세요.",
                letter: "끝없이 흘러가며 새로운 길을 만들어내는 해류처럼, 당신은 세상에 변화와 활력을 가져다주는 소중한 존재입니다.<br><br>당신의 <strong>자유로운 정신</strong>이 많은 사람들에게 희망과 가능성을 보여주고 있어요. 그 흐름을 믿고 계속 나아가세요."
            },
            "abyss-gentle": {
                title: "온화한 심연",
                subtitle: "깊은 곳에서도 따뜻함을 잃지 않는 영혼",
                essence: "깊이 있는 사고를 하면서도 다른 사람들에 대한 따뜻한 마음을 잃지 않는 당신은, 복잡한 감정과 상황을 부드럽고 따뜻하게 이해하는 사람입니다.",
                light: "당신은 깊이와 따뜻함을 모두 가진 드문 사람입니다. 복잡한 상황도 진심으로 이해하려 노력하고, 어려운 감정도 부드럽게 받아안아 주어요. 당신의 깊고 따뜻한 마음이 많은 사람들에게 위로가 됩니다.",
                shadow: "깊은 감정을 너무 많이 흡수해서 때로는 감정적으로 지칠 때가 있어요. 다른 사람들의 아픔을 자신의 것처럼 느끼다 보니 힘들 수도 있어요.",
                growth: "당신의 깊은 공감 능력은 큰 선물이지만, 때로는 자신을 보호하는 것도 필요해요. 모든 감정을 다 받아안으려 하지 말고, 때로는 건강한 거리를 두는 것도 사랑의 한 방법이라는 것을 기억하세요.",
                letter: "가장 깊은 곳에서도 온화함을 잃지 않는 당신은 정말 특별한 사람입니다.<br><br>당신의 <strong>깊고 따뜻한 마음</strong>이 이 세상을 더 이해할 만한 곳으로 만들어주고 있어요. 그 깊이와 온화함을 모두 소중히 여기세요."
            },
            "abyss-brave": {
                title: "용감한 심연",
                subtitle: "깊은 진실을 향해 용감하게 나아가는 영혼",
                essence: "깊이 있는 탐구와 용감한 도전을 동시에 하는 당신은, 어려운 진실도 마주할 용기와 깊은 곳까지 탐험할 의지를 가진 사람입니다.",
                light: "당신은 진실을 찾는 용감한 탐험가입니다. 표면적인 것에 만족하지 않고 깊은 곳까지 파고들 용기가 있어요. 어려운 질문도 피하지 않고 정면으로 마주하는 당신의 모습이 많은 사람들에게 용기를 줍니다.",
                shadow: "너무<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIND DIVE - 마음의 심해로 떠나는 여행</title>
    <meta name="description" content="당신의 마음 깊은 곳에 숨겨진 진짜 모습을 찾아서. 힐링과 위로가 가득한 마음 탐험 여행">
    <meta name="keywords" content="심리테스트, 성격유형, 힐링, 위로, 마음, 심해, 테스트">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600&family=Noto+Serif+KR:wght@300;400;500&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #0a0f1b;
            color: #e8ecf1;
            line-height: 1.65;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }

        .water-drop {
            position: fixed;
            width: 4px;
            height: 4px;
            background: rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            animation: dropFall linear infinite;
        }

        @keyframes dropFall {
            0% { transform: translateY(-100vh) scale(0); opacity: 0; }
            10% { opacity: 1; transform: scale(1); }
            90% { opacity: 1; }
            100% { transform: translateY(100vh) scale(0); opacity: 0; }
        }

        .shooting-star {
            position: fixed;
            width: 2px;
            height: 2px;
            background: rgba(168, 85, 247, 0.8);
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            animation: shootingStar linear infinite;
            box-shadow: 0 0 6px rgba(168, 85, 247, 0.5);
        }

        @keyframes shootingStar {
            0% { transform: translateX(-100px) translateY(-100px) scale(0); opacity: 0; }
            10% { opacity: 1; transform: scale(1); }
            90% { opacity: 1; }
            100% { transform: translateX(100vw) translateY(100vh) scale(0); opacity: 0; }
        }

        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100px); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
            50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.5); }
        }

        @keyframes slideInFromBottom {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-20px); }
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 24px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 3;
        }

        .screen {
            animation: fadeIn 0.6s ease;
        }

        .screen.fade-out {
            animation: fadeOut 0.4s ease forwards;
        }

        /* 오디오 컨트롤 */
        .audio-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-control:hover {
            background: rgba(30, 41, 59, 0.9);
            transform: scale(1.1);
        }

        .audio-control.playing {
            animation: pulseGlow 2s infinite;
        }

        /* 로고 */
        .logo {
            text-align: center;
            margin-bottom: 48px;
        }

        .logo h1 {
            font-size: 2.5rem;
            font-weight: 600;
            letter-spacing: -0.03em;
            background: linear-gradient(135deg, #60a5fa 0%, #818cf8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
            line-height: 1.2;
        }

        .logo p {
            font-size: 0.95rem;
            color: #94a3b8;
            font-weight: 300;
            line-height: 1.4;
        }

        .intro-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.05rem;
            line-height: 1.9;
            color: #cbd5e1;
            text-align: center;
            margin-bottom: 48px;
            font-weight: 300;
            word-break: keep-all;
        }

        .intro-text em {
            font-style: normal;
            color: #e8ecf1;
            font-weight: 400;
        }

        .btn-primary {
            width: 100%;
            padding: 18px 32px;
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            line-height: 1.4;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-primary:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* 스토리 화면 */
        .story-container {
            text-align: center;
            padding: 40px 0;
            animation: slideInFromBottom 0.6s ease;
        }

        .story-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.3rem;
            font-weight: 400;
            color: #a5b4fc;
            margin-bottom: 28px;
            line-height: 1.4;
        }

        .story-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1rem;
            line-height: 1.9;
            color: #cbd5e1;
            margin-bottom: 40px;
            font-weight: 300;
            word-break: keep-all;
        }

        .story-text em {
            font-style: normal;
            color: #e8ecf1;
            font-weight: 400;
        }

        /* 진행 상태 */
        .progress-section {
            margin-bottom: 40px;
            animation: slideInFromBottom 0.5s ease;
        }

        .depth-indicator {
            font-size: 0.85rem;
            color: #64748b;
            text-align: center;
            margin-bottom: 16px;
            font-weight: 400;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            line-height: 1.4;
        }

        .progress-bar {
            height: 3px;
            background: rgba(148, 163, 184, 0.2);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #6366f1 100%);
            border-radius: 3px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3));
            animation: shimmer 2s infinite;
        }

        /* 질문 카드 */
        .question-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 32px 28px;
            margin-bottom: 32px;
            animation: slideInFromBottom 0.6s ease;
        }

        .question-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.25rem;
            line-height: 1.7;
            color: #f1f5f9;
            text-align: center;
            font-weight: 400;
            word-break: keep-all;
            white-space: pre-line;
        }

        /* 선택지 */
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: rgba(30, 41, 59, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.15);
            border-radius: 12px;
            padding: 20px 24px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            color: #e2e8f0;
            font-size: 0.95rem;
            line-height: 1.6;
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: slideInFromBottom 0.4s ease forwards;
            word-break: keep-all;
        }

        .option-btn:nth-child(1) { animation-delay: 0.1s; }
        .option-btn:nth-child(2) { animation-delay: 0.2s; }
        .option-btn:nth-child(3) { animation-delay: 0.3s; }
        .option-btn:nth-child(4) { animation-delay: 0.4s; }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            transition: left 0.5s;
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn:hover {
            background: rgba(30, 41, 59, 0.5);
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateX(4px);
        }

        .option-btn.selected {
            background: rgba(99, 102, 241, 0.15);
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateX(4px);
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* 로딩 화면 */
        .loading-container {
            text-align: center;
            padding: 60px 0;
            animation: fadeInScale 0.6s ease;
        }

        .wave-loader {
            display: inline-flex;
            gap: 8px;
            margin-bottom: 32px;
        }

        .wave-dot {
            width: 8px;
            height: 8px;
            background: #60a5fa;
            border-radius: 50%;
            animation: wave 1.4s ease-in-out infinite;
        }

        .wave-dot:nth-child(2) { animation-delay: 0.2s; }
        .wave-dot:nth-child(3) { animation-delay: 0.4s; }
        .wave-dot:nth-child(4) { animation-delay: 0.6s; }
        .wave-dot:nth-child(5) { animation-delay: 0.8s; }

        .loading-message {
            font-family: 'Noto Serif KR', serif;
            font-size: 1rem;
            line-height: 1.8;
            color: #94a3b8;
            font-weight: 300;
            word-break: keep-all;
        }

        /* 결과 화면 */
        .result-header {
            text-align: center;
            margin-bottom: 48px;
            animation: fadeInScale 0.6s ease;
        }

        .result-badge {
            display: inline-block;
            padding: 8px 18px;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 20px;
            font-size: 0.8rem;
            color: #a5b4fc;
            margin-bottom: 20px;
            font-weight: 500;
            letter-spacing: 0.05em;
            line-height: 1.4;
        }

        .result-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 2rem;
            font-weight: 500;
            line-height: 1.3;
            color: #f8fafc;
            margin-bottom: 16px;
        }

        .result-subtitle {
            font-size: 1rem;
            color: #94a3b8;
            font-weight: 300;
            line-height: 1.6;
            word-break: keep-all;
        }

        .result-section {
            background: rgba(30, 41, 59, 0.3);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 20px;
            opacity: 0;
            animation: slideInFromBottom 0.6s ease forwards;
        }

        .result-section:nth-child(2) { animation-delay: 0.1s; }
        .result-section:nth-child(3) { animation-delay: 0.2s; }
        .result-section:nth-child(4) { animation-delay: 0.3s; }
        .result-section:nth-child(5) { animation-delay: 0.4s; }
        .result-section:nth-child(6) { animation-delay: 0.5s; }

        .result-section h3 {
            font-size: 1.1rem;
            font-weight: 500;
            color: #e8ecf1;
            margin-bottom: 16px;
            line-height: 1.4;
        }

        .result-section p {
            font-size: 0.95rem;
            line-height: 1.8;
            color: #cbd5e1;
            font-weight: 300;
            word-break: keep-all;
        }

        .letter-section {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(99, 102, 241, 0.05) 100%);
            border: 1px solid rgba(99, 102, 241, 0.15);
            position: relative;
            overflow: hidden;
        }

        .letter-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        .letter-content {
            font-family: 'Noto Serif KR', serif;
            font-size: 1rem;
            line-height: 1.9;
            color: #e8ecf1;
            position: relative;
            z-index: 1;
            word-break: keep-all;
        }

        .letter-content strong {
            color: #a5b4fc;
            font-weight: 400;
        }

        /* 공유 버튼 */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 32px;
            animation: slideInFromBottom 0.6s ease 0.4s both;
        }

        .btn-secondary {
            flex: 1;
            padding: 14px 20px;
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.4;
        }

        .btn-secondary:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(148, 163, 184, 0.3);
        }

        .btn-kakao {
            background: #fee500;
            color: #3c1e1e;
            border-color: #fee500;
        }

        .btn-kakao:hover {
            background: #fdd835;
            border-color: #fdd835;
        }

        .btn-text {
            display: block;
            margin: 24px auto 0;
            background: none;
            border: none;
            color: #64748b;
            font-size: 0.9rem;
            cursor: pointer;
            transition: color 0.3s;
            animation: fadeIn 0.6s ease 0.5s both;
            line-height: 1.4;
        }

        .btn-text:hover {
            color: #94a3b8;
        }

        /* 숨김 */
        .hidden {
            display: none !important;
        }

        /* 접근성 */
        .btn-primary:focus,
        .option-btn:focus,
        .btn-secondary:focus,
        .btn-text:focus,
        .audio-control:focus {
            outline: 2px solid rgba(99, 102, 241, 0.5);
            outline-offset: 2px;
        }

        /* 모바일 최적화 */
        @media (max-width: 480px) {
            .container { 
                padding: 20px; 
            }
            
            .logo h1 { 
                font-size: 2.2rem; 
            }
            
            .question-text { 
                font-size: 1.15rem; 
                padding: 0 4px; 
            }
            
            .result-title { 
                font-size: 1.75rem; 
            }
            
            .option-btn { 
                padding: 18px 20px; 
                font-size: 0.9rem; 
            }
            
            .intro-text, 
            .story-text, 
            .loading-message { 
                font-size: 0.95rem; 
                padding: 0 4px; 
            }
            
            .result-section p, 
            .letter-content { 
                font-size: 0.9rem; 
                padding: 0 4px; 
            }
            
            .action-buttons { 
                flex-direction: column; 
            }
            
            .btn-secondary { 
                font-size: 0.9rem; 
            }
            
            .audio-control { 
                top: 15px; 
                right: 15px; 
                width: 45px; 
                height: 45px; 
            }
        }

        /* 성능 최적화 */
        .container,
        .screen,
        .question-card,
        .result-section {
            will-change: transform, opacity;
        }

        /* 스크롤바 스타일링 */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.3);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.5);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(99, 102, 241, 0.7);
        }
    </style>
</head>

<body>
    <!-- 오디오 컨트롤 -->
    <div class="audio-control" id="audioControl" title="배경음악" role="button" tabindex="0" aria-label="배경음악 재생/정지">
        <span id="audioIcon" aria-hidden="true">🎵</span>
    </div>

    <div class="container">
        <!-- 시작 화면 -->
        <div class="screen" id="welcomeScreen">
            <div class="logo">
                <h1>MIND DIVE</h1>
                <p>마음의 심해로 떠나는 여행</p>
            </div>
            
            <div class="intro-text">
                지금 이 순간, 당신은 혼자가 아닙니다.<br>
                수많은 사람들이 각자의 마음 깊은 곳에서<br>
                <em>진실한 자신</em>을 찾고 있어요.<br><br>
                
                당신의 마음은 깊고 아름다운 바다입니다.<br>
                표면의 작은 파도 아래에는<br>
                고요하고 따뜻한 세계가 기다리고 있어요.<br><br>
                
                오늘은 온전히 당신을 위한 시간입니다.<br>
                함께 천천히 내려가 보아요.
            </div>
            
            <button class="btn-primary" id="startBtn" aria-label="MIND DIVE 시작하기">마음의 바다로 들어가기</button>
        </div>

        <!-- 스토리 화면 -->
        <div class="screen hidden" id="storyScreen">
            <div class="story-container">
                <h2 class="story-title" id="storyTitle"></h2>
                <div class="story-text" id="storyText"></div>
                <button class="btn-primary" id="continueBtn" aria-label="다음으로 계속하기">계속 나아가기</button>
            </div>
        </div>

        <!-- 질문 화면 -->
        <div class="screen hidden" id="questionScreen">
            <div class="progress-section">
                <div class="depth-indicator" id="depthIndicator" aria-live="polite">수심 0m</div>
                <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div class="question-card">
                <div class="question-text" id="questionText" role="heading" aria-level="2"></div>
            </div>
            
            <div class="options" id="optionsContainer" role="radiogroup" aria-label="질문에 대한 선택지"></div>
        </div>

        <!-- 로딩 화면 -->
        <div class="screen hidden" id="loadingScreen">
            <div class="loading-container">
                <div class="wave-loader" aria-label="분석 중" role="status">
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                </div>
                <div class="loading-message" id="loadingMessage" aria-live="polite">
                    마음의 깊은 곳에서 당신만의 보물을 발견했습니다
                </div>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div class="screen hidden" id="resultScreen">
            <div class="result-header">
                <div class="result-badge">당신의 마음 속 발견</div>
                <h2 class="result-title" id="resultTitle"></h2>
                <p class="result-subtitle" id="resultSubtitle"></p>
            </div>

            <div class="result-section">
                <h3>당신의 본질</h3>
                <p id="essenceText"></p>
            </div>

            <div class="result-section">
                <h3>당신이 세상에 주는 선물</h3>
                <p id="lightSide"></p>
            </div>

            <div class="result-section">
                <h3>때로는 힘든 당신의 마음</h3>
                <p id="shadowSide"></p>
            </div>

            <div class="result-section">
                <h3>당신에게 필요한 성장</h3>
                <p id="growthPath"></p>
            </div>

            <div class="result-section letter-section">
                <div class="letter-content" id="letterContent"></div>
            </div>

            <div class="action-buttons">
                <button class="btn-secondary btn-kakao" id="kakaoBtn" aria-label="카카오톡으로 공유">카카오톡</button>
                <button class="btn-secondary" id="shareBtn" aria-label="결과 공유하기">공유하기</button>
                <button class="btn-secondary" id="linkBtn" aria-label="링크 복사하기">링크복사</button>
            </div>

            <button class="btn-text" id="restartBtn" aria-label="처음부터 다시 시작">다시 잠수하기</button>
        </div>
    </div>

    <script>
        'use strict';
        
        // 전역 상태 관리
        const gameState = {
            currentDepth: 0,
            currentStory: 0,
            responses: [],
            isTransitioning: false,
            scores: {
