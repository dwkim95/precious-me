<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ë§ˆìŒì˜ ë‚˜ì¹¨ë°˜ | ë‚´ ë§ˆìŒ ì† ë¬¼ê±´ ì°¾ê¸°</title>
    <meta name="description" content="AI 'ì•„ìŠ¤íŠ¸ë¼'ì™€ í•¨ê»˜ ë– ë‚˜ëŠ” ë§ˆìŒ íƒí—˜. ë‹¹ì‹ ì˜ ë§ˆìŒ ì† ë°©ì—ëŠ” ì–´ë–¤ ë¬¼ê±´ì´ ë†“ì—¬ìˆì„ê¹Œìš”? ì‰½ê³  ë”°ëœ»í•œ ì‹¬ë¦¬ ë¶„ì„ì„ ê²½í—˜í•´ë³´ì„¸ìš”.">
    <meta property="og:title" content="ë§ˆìŒì˜ ë‚˜ì¹¨ë°˜ - AI ì‹¬ì¸µ ì‹¬ë¦¬ ë¶„ì„">
    <meta property="og:description" content="AIê°€ ë°œê²¬í•œ ë‚´ ë§ˆìŒ ì† ìƒì§•ì€ ë¬´ì—‡ì¼ê¹Œìš”? ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”!">
    <meta property="og:image" content="https://i.ibb.co/3k5JqB4/og-image-compass.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --font-main: 'Noto Sans KR', sans-serif;
            --bg-deep-blue: #121826;
            --bg-card: rgba(255, 255, 255, 0.05);
            --text-primary: #E0E6F1;
            --text-secondary: #94A3B8;
            --text-accent: #A5B4FC;
            --accent-point: #F472B6;
            --border-color: rgba(255, 255, 255, 0.1);
            --border-radius: 16px;
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-main);
            font-weight: 400;
            background-color: var(--bg-deep-blue);
            color: var(--text-primary);
            line-height: 1.7;
            overflow-x: hidden;
        }

        #app { max-width: 500px; margin: 0 auto; padding: 30px 20px; position: relative; z-index: 1; min-height: 100vh; }
        
        .fade-in { animation: fadeIn 1s ease-out both; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .header { text-align: center; margin: 10vh 0; }
        .header h1 { font-size: 30px; font-weight: 700; }
        .header .subtitle { font-size: 16px; color: var(--text-secondary); margin-top: 12px; }
        .header .start-button {
            margin-top: 30px; padding: 14px 36px;
            font-size: 16px; font-weight: 500;
            background-color: var(--text-accent); color: var(--bg-deep-blue);
            border: none; border-radius: 30px; cursor: pointer;
            transition: all 0.2s ease;
        }
        .header .start-button:hover { transform: translateY(-2px); }

        .progress-container { margin-bottom: 24px; }
        #progress-text { text-align: center; font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; }
        .progress-bar { width: 100%; height: 5px; background: rgba(255,255,255,0.1); border-radius: 2.5px; }
        #progress-fill { height: 100%; background: var(--text-accent); border-radius: 2.5px; transition: width 0.4s ease; }
        
        .question-container { text-align: center; margin: auto 0; }
        #question-box { font-size: 22px; font-weight: 500; word-break: keep-all; margin-bottom: 24px; }
        .choice-options { display: flex; flex-direction: column; gap: 12px; }
        .choice-option {
            background: var(--bg-card); border: 1px solid var(--border-color);
            border-radius: 12px; padding: 18px; cursor: pointer;
            transition: all 0.2s ease;
        }
        .choice-option:hover { background: rgba(255, 255, 255, 0.1); }
        .option-text { font-size: 16px; font-weight: 300; }
        
        .loading-screen { text-align: center; margin: auto; }
        .loading-text { font-size: 20px; font-weight: 500; }
        #star-shower { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .star { position: absolute; background: white; border-radius: 50%; animation: fall 2s linear forwards; }
        @keyframes fall { to { transform: translateY(100vh); opacity: 0; } }

        /* --- ê²°ê³¼ í˜ì´ì§€ --- */
        .result-container { padding-top: 5vh; }
        .result-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 24px; margin-bottom: 20px; }
        .result-card h2 { font-size: 20px; font-weight: 700; color: var(--text-accent); margin-bottom: 12px; display: flex; align-items: center; }
        .result-card h2 .icon { margin-right: 10px; }
        .result-card p { font-size: 16px; line-height: 1.8; color: var(--text-secondary); font-weight: 300; }
        
        .artifact-header { text-align: center; padding: 16px 0; }
        .artifact-icon { font-size: 48px; margin-bottom: 16px; }
        .artifact-title { font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px; }
        .artifact-subtitle { font-size: 16px; color: var(--accent-point); }
        
        .preference-container { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .preference-box h3 { font-size: 16px; font-weight: 500; margin-bottom: 10px; }
        .preference-list { list-style: none; padding: 0; }
        .preference-list li { font-size: 15px; color: var(--text-secondary); margin-bottom: 6px; }
        
        .letter-card p:not(:last-child) { margin-bottom: 16px; }
        .share-buttons { margin-top: 24px; display: flex; gap: 12px; justify-content: center; }
        .share-btn {
            font-size: 15px; font-weight: 500;
            padding: 12px 24px; border-radius: 30px;
            border: 1px solid var(--border-color); background: rgba(255,255,255,0.1);
            color: var(--text-primary); cursor: pointer; transition: all 0.2s ease;
        }
        .share-btn:hover { background: var(--text-accent); color: var(--bg-deep-blue); border-color: var(--text-accent); }
    </style>
 </head>
 
 <body>
    <div id="star-shower"></div>
    <div id="app"></div>
 
    <script>
    //<![CDATA[(function() {
        const MindJourneyApp = {
            state: { currentQuestionIndex: 0, scores: {}, isNavigating: false },
            
            questions: [
                { question: "ì£¼ë§ì— ì•½ì†ì´ ì—†ë‹¤ë©´, ì£¼ë¡œ ë¬´ì—‡ì„ í•˜ë©° ë³´ë‚´ì‹œë‚˜ìš”?", options: [ { text: "í‰ì†Œ ê°€ê³  ì‹¶ì—ˆë˜ ê³³ìœ¼ë¡œ í›Œì© ë– ë‚˜ìš”.", weight: "suitcase" }, { text: "ë°€ë¦° ì±…ì„ ì½ê±°ë‚˜ ì˜í™”ë¥¼ ë³´ë©° ìƒê°ì„ ì •ë¦¬í•´ìš”.", weight: "lamp" }, { text: "ì¹œêµ¬ë“¤ì„ ë§Œë‚˜ ë§›ìˆëŠ” ìŒì‹ì„ ë¨¹ê³  ì´ì•¼ê¸° ë‚˜ëˆ ìš”.", weight: "table" }, { text: "ê·¸ë¦¼ì„ ê·¸ë¦¬ê±°ë‚˜ ì•…ê¸°ë¥¼ ì—°ì£¼í•˜ëŠ” ë“± ì°½ì‘ í™œë™ì„ í•´ìš”.", weight: "sketchbook" } ]},
                { question: "ë‹¹ì‹ ì—ê²Œ 'ì„±ê³µ'ì´ë€ ë¬´ì—‡ì— ê°€ì¥ ê°€ê¹Œìš´ê°€ìš”?", options: [ { text: "ë§ì€ ê²½í—˜ì„ í†µí•´ ììœ ë¡­ê²Œ ì‚¬ëŠ” ê²ƒ", weight: "suitcase" }, { text: "ë‚´ê°€ í•˜ëŠ” ì¼ì—ì„œ ìµœê³ ì˜ ì „ë¬¸ê°€ê°€ ë˜ëŠ” ê²ƒ", weight: "lamp" }, { text: "ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒë“¤ê³¼ í–‰ë³µí•˜ê²Œ ì‚¬ëŠ” ê²ƒ", weight: "sofa" }, { text: "ì„¸ìƒì— ê¸ì •ì ì¸ ì˜í–¥ì„ ì£¼ëŠ” ê²ƒ", weight: "fireplace" } ]},
                { question: "í˜ë“¤ì–´í•˜ëŠ” ì¹œêµ¬ì—ê²Œ ì–´ë–¤ ìœ„ë¡œë¥¼ ê±´ë„¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?", options: [ { text: "ë¬¸ì œì˜ ì›ì¸ì„ ë¶„ì„í•˜ê³  í˜„ì‹¤ì ì¸ í•´ê²°ì±…ì„ ì°¾ì•„ì¤˜ìš”.", weight: "lamp" }, { text: "ë§›ìˆëŠ” ìŒì‹ì„ ì‚¬ì£¼ë©° ê¸°ë¶„ì„ ì „í™˜ì‹œì¼œ ì¤˜ìš”.", weight: "table" }, { text: "ì•„ë¬´ ë§ ì—†ì´ ê³ì—ì„œ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ì¤˜ìš”.", weight: "sofa" }, { text: "í•¨ê»˜ ìƒˆë¡œìš´ í™œë™ì„ í•˜ë©° ìŠ¬í””ì„ ìŠê²Œ ë„ì™€ì¤˜ìš”.", weight: "suitcase" } ]},
                { question: "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¬ëì„ ë•Œ, ë‹¹ì‹ ì˜ ì²« ë°˜ì‘ì€?", options: [ { text: "'ì´ê²Œ ì •ë§ ê°€ëŠ¥í• ê¹Œ?' ì‹¤í˜„ ê°€ëŠ¥ì„±ë¶€í„° ë”°ì ¸ë´ìš”.", weight: "fireplace" }, { text: "'ì¬ë°Œê² ë‹¤!' ì¼ë‹¨ êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–»ê²Œ ë§Œë“¤ì§€ ìƒìƒí•´ë´ìš”.", weight: "sketchbook" }, { text: "'ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ì–´ë–»ê²Œ ìƒê°í• ê¹Œ?' ì£¼ë³€ì— ë¬¼ì–´ë´ìš”.", weight: "table" }, { text: "ì´ ì•„ì´ë””ì–´ì˜ ì›ë¦¬ì™€ ë°°ê²½ì— ëŒ€í•´ ë” ê¹Šì´ íƒêµ¬í•´ìš”.", weight: "lamp" } ]},
                { question: "ë‹¹ì‹ ì´ ê°€ì¥ í¸ì•ˆí•¨ì„ ëŠë¼ëŠ” ê³µê°„ì€ ì–´ë–¤ ê³³ì¸ê°€ìš”?", options: [ { text: "ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ë”°ëœ»í•œ ê±°ì‹¤", weight: "fireplace" }, { text: "ì–¸ì œë“  ê¸°ëŒˆ ìˆ˜ ìˆëŠ” í‘¹ì‹ í•œ ì†ŒíŒŒ ìœ„", weight: "sofa" }, { text: "ë‚˜ë§Œì˜ ìƒê°ì— ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” ì¡°ìš©í•œ ì„œì¬", weight: "lamp" }, { text: "ìƒˆë¡œìš´ ì˜ê°ì´ ë– ì˜¤ë¥´ëŠ” ë‚˜ë§Œì˜ ì‘ì—… ê³µê°„", weight: "sketchbook" } ]},
                { question: "ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ, ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ” í¸ì¸ê°€ìš”?", options: [ { text: "ìƒí™©ì„ ì£¼ë„í•˜ì—¬ ëª¨ë‘ì—ê²Œ ì´ë¡œìš´ ë°©í–¥ìœ¼ë¡œ ì´ëŒì–´ìš”.", weight: "fireplace" }, { text: "ì„œë¡œì˜ ì…ì¥ì„ ì¶©ë¶„íˆ ë“£ê³  íƒ€í˜‘ì ì„ ì°¾ìœ¼ë ¤ ë…¸ë ¥í•´ìš”.", weight: "sofa" }, { text: "ê°ˆë“± ìƒí™©ì„ í”¼í•˜ê³ , ìƒˆë¡œìš´ í™”ì œë¡œ ë¶„ìœ„ê¸°ë¥¼ ë°”ê¿”ìš”.", weight: "table" }, { text: "ì ì‹œ ê±°ë¦¬ë¥¼ ë‘ê³  í˜¼ì ì´ì„±ì ìœ¼ë¡œ ìƒí™©ì„ íŒë‹¨í•´ìš”.", weight: "lamp" } ]},
                { question: "ë‹¹ì‹ ì—ê²Œ 'ì„±ì¥'ì´ë€ ì–´ë–¤ ì˜ë¯¸ì¸ê°€ìš”?", options: [ { text: "ë‹¤ì–‘í•œ ê²½í—˜ì„ í†µí•´ ì‹œì•¼ë¥¼ ë„“íˆëŠ” ê²ƒ", weight: "suitcase" }, { text: "í•˜ë‚˜ì˜ ëª©í‘œë¥¼ í–¥í•´ ê¾¸ì¤€íˆ ë‚˜ì•„ê°€ëŠ” ê²ƒ", weight: "fireplace" }, { text: "ì–´ì œë³´ë‹¤ ë” ë‚˜ì€ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦¬ëŠ” ê²ƒ", weight: "sketchbook" }, { text: "ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ ë” ê¹Šì€ ê´€ê³„ë¥¼ ë§ºëŠ” ê²ƒ", weight: "table" } ]},
                { question: "ë‹¹ì‹ ì´ ê°€ì¥ ë“£ê³  ì‹¶ì€ ì¹­ì°¬ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: [ { text: "ì—­ì‹œ ë¯¿ìŒì§ìŠ¤ëŸ¬ì›Œ, ë„¤ ë•ë¶„ì— ë“ ë“ í•´.", weight: "fireplace" }, { text: "ë„ˆë‘ ìˆìœ¼ë©´ í¸ì•ˆí•˜ê³  ë§ˆìŒì´ ë”°ëœ»í•´ì ¸.", weight: "sofa" }, { text: "ì–´ë–»ê²Œ ê·¸ëŸ° ìƒê°ì„ í–ˆì–´? ì •ë§ ë…ì°½ì ì´ë‹¤!", weight: "sketchbook" }, { text: "ë„ˆì˜ ì´ì•¼ê¸°ëŠ” í•­ìƒ í¥ë¯¸ë¡­ê³  ìƒˆë¡œì›Œ.", weight: "suitcase" } ]}
            ],
            
            soulObjects: {
                lamp: { title: "ê³ ìš”í•œ ì„œì¬ì˜ ë¨í”„", subtitle: "ì§€í˜œì™€ í†µì°°ì˜ ë¹›", icon: "ğŸ’¡", keywords: ["#ì§€í˜œë¡œìš´", "#í†µì°°ë ¥ìˆëŠ”", "#ì‹ ì¤‘í•œ"], likes: ["í˜¼ìë§Œì˜ ì‹œê°„", "ê¹Šì´ ìˆëŠ” ëŒ€í™”", "ì§€ì‹ íƒêµ¬"], dislikes: ["ê°€ë³ê³  í”¼ìƒì ì¸ ëŒ€í™”", "ì„±ê¸‰í•œ ê²°ì •", "ì‹œë„ëŸ¬ìš´ ì¥ì†Œ"], identity: "ì„¸ìƒì˜ ì´ì¹˜ë¥¼ ì°¨ë¶„íˆ ë“¤ì—¬ë‹¤ë³´ëŠ” ì‚¬ëŒ", struggle: "ë„ˆë¬´ ë§ì€ ìƒê°ì— ë¹ ì ¸ í–‰ë™í•˜ê¸° ì–´ë ¤ì› ë˜ ìˆœê°„ë“¤", social: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ê¸¸ì„ ë°í˜€ì£¼ëŠ” ë“±ëŒ€" },
                fireplace: { title: "ëª¨ë‘ë¥¼ ìœ„í•œ ë²½ë‚œë¡œ", subtitle: "ë”°ëœ»í•œ ì¤‘ì‹¬", icon: "ğŸ”¥", keywords: ["#ì±…ì„ê°ìˆëŠ”", "#ì•ˆì •ì ì¸", "#ë¦¬ë”"], likes: ["ì‚¬ëŒë“¤ì„ ì±™ê²¨ì£¼ê¸°", "ê³„íš ì„¸ìš°ê¸°", "ì‹ ë¢°ë°›ëŠ” ê²ƒ"], dislikes: ["ë¬´ì§ˆì„œí•˜ê³  ì¦‰í¥ì ì¸ ìƒí™©", "ë¬´ì±…ì„í•œ íƒœë„", "ë¶ˆí™•ì‹¤í•¨"], identity: "ê³µë™ì²´ì˜ ì¤‘ì‹¬ì„ ì§€í‚¤ëŠ” ë“ ë“ í•œ ì‚¬ëŒ", struggle: "ëª¨ë‘ë¥¼ ì±…ì„ì ¸ì•¼ í•œë‹¤ëŠ” ë¶€ë‹´ê°ê³¼ ë¬´ê²Œ", social: "ëª¨ë‘ê°€ ê¸°ëŒˆ ìˆ˜ ìˆëŠ” ë”°ëœ»í•˜ê³  ê²¬ê³ í•œ ë²½" },
                sketchbook: { title: "ìƒˆí•˜ì–€ ìŠ¤ì¼€ì¹˜ë¶", subtitle: "ë¬´í•œí•œ ê°€ëŠ¥ì„±", icon: "ğŸ¨", keywords: ["#ì°½ì˜ì ì¸", "#ìƒìƒë ¥ì´ í’ë¶€í•œ", "#ë…ì°½ì ì¸"], likes: ["ìƒˆë¡œìš´ ì•„ì´ë””ì–´", "ììœ ë¡œìš´ í‘œí˜„", "ë‚˜ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ë§Œë“¤ê¸°"], dislikes: ["í‹€ì— ë°•íŒ ê·œì¹™", "ë°˜ë³µì ì¸ ì¼ìƒ", "ì°½ì˜ì„±ì„ ì–µì••í•˜ëŠ” ê²ƒ"], identity: "ì„¸ìƒì— ì—†ë˜ ê²ƒì„ ìƒìƒí•˜ê³  ë§Œë“œëŠ” ì‚¬ëŒ", struggle: "ë‚˜ì˜ ë…íŠ¹í•œ ì„¸ê³„ë¥¼ ë‚¨ë“¤ì´ ì´í•´í•´ì£¼ì§€ ëª»í• ê¹Œ ë´ ëŠë¼ëŠ” ë¶ˆì•ˆí•¨", social: "ì¼ìƒì— ìƒˆë¡œìš´ ì˜ê°ì„ ì£¼ëŠ” ì˜ˆìˆ ê°€" },
                suitcase: { title: "ì˜¤ë˜ëœ ì—¬í–‰ ê°€ë°©", subtitle: "ììœ ì™€ ê²½í—˜ì˜ ê¸°ë¡", icon: "âœˆï¸", keywords: ["#ììœ ë¡œìš´", "#ë„ì „ì ì¸", "#ê²½í—˜ì„ ì¤‘ì‹œí•˜ëŠ”"], likes: ["ìƒˆë¡œìš´ ì¥ì†Œì™€ ê²½í—˜", "ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ëª¨í—˜", "ììœ "], dislikes: ["ì •ì²´ë˜ê³  ì§€ë£¨í•œ ì¼ìƒ", "ê·œì¹™ê³¼ ì œì•½", "ê¹Šì€ ì†Œì†ê°"], identity: "ìµìˆ™í•œ ê³³ì„ ë– ë‚˜ ìƒˆë¡œìš´ ì„¸ìƒì„ íƒí—˜í•˜ëŠ” ì‚¬ëŒ", struggle: "í•œê³³ì— ì •ì°©í•˜ì§€ ëª»í•˜ê³  ë§ˆìŒ í•œí¸ì´ ëŠ˜ ê³µí—ˆí–ˆë˜ ë‚ ë“¤", social: "ì£¼ë³€ì— ìƒˆë¡œìš´ ë°”ëŒê³¼ í™œê¸°ë¥¼ ë¶ˆì–´ë„£ëŠ” ì¡´ì¬" },
                sofa: { title: "í‘¹ì‹ í•œ ì†ŒíŒŒ", subtitle: "í¸ì•ˆí•œ ìœ„ë¡œì™€ ì•ˆì‹", icon: "ğŸ›‹ï¸", keywords: ["#í¸ì•ˆí•œ", "#ë‹¤ì •í•œ", "#ìˆ˜ìš©ì ì¸"], likes: ["ì•ˆì •ì ì¸ ê´€ê³„", "í¸ì•ˆí•œ ë¶„ìœ„ê¸°", "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì´ì•¼ê¸° ë“¤ì–´ì£¼ê¸°"], dislikes: ["ë¶ˆí¸í•˜ê³  ì–´ìƒ‰í•œ ê´€ê³„", "ë‚ ì¹´ë¡œìš´ ë¹„íŒ", "ê³¼ë„í•œ ê²½ìŸ"], identity: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì´ì•¼ê¸°ë¥¼ ê°€ë§Œíˆ ë“¤ì–´ì£¼ê³  ê°ì‹¸ ì•ˆì•„ì£¼ëŠ” ì‚¬ëŒ", struggle: "ëª¨ë“  ì‚¬ëŒì—ê²Œ ì¢‹ì€ ì‚¬ëŒì´ ë˜ë ¤ë‹¤ ë³´ë‹ˆ, ì •ì‘ ë‚´ ë§ˆìŒì„ ëŒë³´ì§€ ëª»í–ˆë˜ ì‹œê°„ë“¤", social: "ëˆ„êµ¬ë‚˜ ì§€ì³¤ì„ ë•Œ ì•„ë¬´ ë§ ì—†ì´ ê¸°ëŒˆ ìˆ˜ ìˆëŠ” ì‰¼í„°" },
                table: { title: "ëª¨ë‘ì˜ ì‹íƒ", subtitle: "ë‚˜ëˆ”ê³¼ ì—°ê²°ì˜ ì¦ê±°ì›€", icon: "ğŸ½ï¸", keywords: ["#ì‚¬êµì ì¸", "#ì¦ê±°ì›€ì„ ì¶”êµ¬í•˜ëŠ”", "#ì—°ê²°ì"], likes: ["ì¹œêµ¬ë“¤ê³¼ì˜ ë§Œë‚¨", "ë§›ìˆëŠ” ìŒì‹ ë‚˜ëˆ„ê¸°", "ìœ ì¾Œí•œ ëŒ€í™”"], dislikes: ["í˜¼ì ìˆëŠ” ê²ƒ", "ì–´ìƒ‰í•˜ê³  ì¡°ìš©í•œ ë¶„ìœ„ê¸°", "ì§„ì§€í•˜ê³  ë¬´ê±°ìš´ ì´ì•¼ê¸°"], identity: "ì‚¬ëŒë“¤ì„ ì—°ê²°í•˜ê³  ì¦ê±°ìš´ ìˆœê°„ì„ ë§Œë“¤ì–´ë‚´ëŠ” ì‚¬ëŒ", struggle: "ê°€ë”ì€ í˜¼ìê°€ ë˜ëŠ” ê²ƒì„ ê²¬ë””ê¸° í˜ë“¤ì–´í–ˆë˜ ì™¸ë¡œì›€", social: "ëª¨ë‘ë¥¼ í•˜ë‚˜ë¡œ ëª¨ìœ¼ëŠ” ì¦ê±°ìš´ íŒŒí‹°ì˜ ì£¼ìµœì" },
            },

            initDOM() {
                this.app = document.getElementById('app');
                this.renderWelcome();
            },
            renderWelcome() {
                this.app.innerHTML = `<div class="header fade-in"><h1>ë§ˆìŒì˜ ë‚˜ì¹¨ë°˜</h1><p class="subtitle">AI ì ìˆ˜í•¨ 'ì•„ìŠ¤íŠ¸ë¼'ì™€ í•¨ê»˜<br>ë‹¹ì‹ ì˜ ë§ˆìŒ ì† ë°©ì„ íƒí—˜í•´ ë³´ì„¸ìš”.</p><button class="header start-button">íƒí—˜ ì‹œì‘</button></div>`;
                this.app.querySelector('.start-button').addEventListener('click', () => {
                    this.startJourney();
                    this.animateSubmarine();
                });
            },
            animateSubmarine() {
                const submarine = document.createElement('div');
                submarine.innerHTML = `<svg viewBox="0 0 100 50" fill="currentColor" color="#90BFFF" width="80px"><path d="M10 25 a10 10 0 0 1 20 0 h40 a10 10 0 0 1 20 0 h10 v25 h-90 z M30 15 a5 5 0 1 1 10 0 a5 5 0 1 1 -10 0 M60 15 a5 5 0 1 1 10 0 a5 5 0 1 1 -10 0"/></svg>`;
                submarine.style.cssText = `position:fixed; top:40%; left:50%; transform:translateX(-50%); z-index:20; transition: all 1.5s ease-in-out;`;
                document.body.appendChild(submarine);
                setTimeout(() => {
                    submarine.style.transform = 'translateX(-50%) translateY(100vh) scale(0.5)';
                    submarine.style.opacity = '0';
                }, 100);
                setTimeout(() => { submarine.remove(); }, 1600);
            },
            startJourney() { this.resetState(); this.renderQuestion(); },
            resetState() { this.state.currentQuestionIndex = 0; this.state.scores = {}; this.state.isNavigating = false; },
            renderQuestion() {
                const index = this.state.currentQuestionIndex;
                const q = this.questions[index];
                const progress = ((index + 1) / this.questions.length) * 100;
                this.app.innerHTML = `<div class="journey-container fade-in"><div class="progress-container"><div id="progress-text">ì§ˆë¬¸ ${index + 1} / ${this.questions.length}</div><div class="progress-bar"><div id="progress-fill" style="width:${progress}%"></div></div></div><div class="question-card"><h3 id="question-box">${q.question}</h3><div class="choice-options">${q.options.map(opt => `<div class="choice-option" data-weight="${opt.weight}"><span class="option-text">${opt.text}</span></div>`).join('')}</div></div></div>`;
                this.app.querySelectorAll('.choice-option').forEach(el => { el.addEventListener('click', () => this.handleSelection(el.dataset.weight)); });
            },
            handleSelection(weight) {
                if (this.state.isNavigating) return;
                this.state.isNavigating = true;
                this.state.scores[weight] = (this.state.scores[weight] || 0) + 1;
                this.app.querySelector('.journey-container').style.opacity = 0;
                setTimeout(() => {
                    if (this.state.currentQuestionIndex < this.questions.length - 1) {
                        this.state.currentQuestionIndex++;
                        this.renderQuestion();
                        this.state.isNavigating = false;
                    } else { this.renderLoading(); }
                }, 400);
            },
            renderLoading() {
                this.app.innerHTML = `<div class="loading-screen fade-in"><div class="loading-graphic">âœ¨</div><h2 class="loading-text">ë§ˆìŒ ì†ì„ ì—¬í–‰í•˜ë©°<br>ë‹¹ì‹ ì„ ë‹®ì€ ë¬¼ê±´ì„ ì°¾ê³  ìˆì–´ìš”...</h2></div>`;
                this.createStars();
                setTimeout(() => {
                    this.renderResults();
                    document.getElementById('star-shower').innerHTML = '';
                }, 3000);
            },
            createStars() {
                const container = document.getElementById('star-shower');
                if (!container) return;
                for (let i = 0; i < 15; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.width = `${Math.random() * 2 + 1}px`;
                    star.style.height = star.style.width;
                    star.style.left = `${Math.random() * 100}vw`;
                    star.style.animationDelay = `${Math.random() * 2}s`;
                    star.style.animationDuration = `${Math.random() * 2 + 1}s`;
                    container.appendChild(star);
                }
            },
            renderResults() {
                const analysis = this.analyze();
                const artifact = this.soulObjects[analysis.primary] || this.soulObjects.lamp;
                this.app.innerHTML = `
                    <div class="result-container fade-in">
                        <div class="result-card">
                            <div class="artifact-header">
                                <p style="font-size:16px; color: var(--text-secondary);">ë‹¹ì‹ ì˜ ë§ˆìŒì˜ ë°©ì—ëŠ”...</p>
                                <div class="artifact-icon">${artifact.icon}</div>
                                <h2 class="artifact-title" style="color:var(--text-primary); margin:0;">${artifact.title}</h2>
                                <p class="artifact-subtitle">${artifact.subtitle}</p>
                                <p class="flavor-keywords">${artifact.keywords.map(k => `#${k}`).join(' ')}</p>
                            </div>
                            <p>${artifact.description}</p>
                        </div>
                        <div class="result-card">
                            <h2><span class="icon">ğŸ‘</span>ë‹¹ì‹ ì´ ì¢‹ì•„í•˜ëŠ” ê²ƒ & <span class="icon">ğŸ‘</span>í˜ë“¤ì–´í•˜ëŠ” ê²ƒ</h2>
                            <div class="preference-container">
                                <div class="preference-box">
                                    <h3>ì´ëŸ° ê±¸ ì¢‹ì•„í•´ìš”</h3>
                                    <ul class="preference-list">${artifact.likes.map(like => `<li>${like}</li>`).join('')}</ul>
                                </div>
                                <div class="preference-box">
                                    <h3>ì´ëŸ° ê±´ ì¡°ê¸ˆ í˜ë“¤ì–´ìš”</h3>
                                    <ul class="preference-list">${artifact.dislikes.map(dislike => `<li>${dislike}</li>`).join('')}</ul>
                                </div>
                            </div>
                        </div>
                        <div class="result-card letter-card">
                            <h2><span class="icon">ğŸ’Œ</span>ë‹¹ì‹ ì˜ ë§ˆìŒì—ê²Œ</h2>
                            ${this.getComfortMessage(analysis)}
                        </div>
                        <div class="share-buttons">
                            <button class="share-btn" id="share-kakao">ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³µìœ </button>
                            <button class="share-btn" id="copy-link">ë§í¬ ë³µì‚¬</button>
                        </div>
                        <button class="restart-button" onclick="MindJourneyApp.initDOM()">ë‹¤ì‹œ íƒí—˜í•˜ê¸°</button>
                    </div>`;
                this.addShareEventListeners(artifact.title);
            },
            
            analyze() {
                const sorted = Object.entries(this.state.scores).sort((a,b) => b[1] - a[1]);
                return {
                    primary: sorted.length > 0 ? sorted[0][0] : "lamp",
                    secondary: sorted.length > 1 ? sorted[1][0] : null,
                };
            },
            getComfortMessage(analysis) {
                const p = this.soulObjects[analysis.primary] || this.soulObjects.lamp;
                const s = analysis.secondary ? this.soulObjects[analysis.secondary] : null;

                let struggle = `ë§ì€ ì•ˆ í•´ë„, ì–´ì©Œë©´ ë‹¹ì‹ ì€ ê·¸ë™ì•ˆ í˜¼ì ë™ë™ ì•“ì•„ì™”ì„ì§€ ëª¨ë¦…ë‹ˆë‹¤. ë°”ë¡œ '${p.struggle}' ë•Œë¬¸ì— ë§ì´ì£ .`;
                if (s) {
                    struggle += ` ë•Œë¡œëŠ” '${s.struggle}'ê¹Œì§€ ë”í•´ì ¸, ê·¸ ë¬´ê²Œê°€ ë”ìš± ë²„ê±°ì› ì„ ê²ë‹ˆë‹¤.`;
                } else {
                    struggle += ` ê·¸ ë§ˆìŒì„ ëˆ„êµ¬ì—ê²Œë„ ì‰½ê²Œ í„¸ì–´ë†“ì§€ ëª»í–ˆì„ ê²ë‹ˆë‹¤.`;
                }
                
                return `<p>ë‹¹ì‹ ì€ **${p.identity}**ì…ë‹ˆë‹¤.</p><p>${struggle}</p><p>í•˜ì§€ë§Œ ê¸°ì–µí•˜ì„¸ìš”. ê·¸ëŸ° ë‹¹ì‹ ì´ê¸°ì—, ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ë‹¹ì‹ ì€ **${p.social}**ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì¡´ì¬ëŠ” ì´ë¯¸ ëˆ„êµ°ê°€ì—ê²Œ í° í˜ì´ ë˜ê³  ìˆìŠµë‹ˆë‹¤.</p>`;
            },
            addShareEventListeners(resultTitle) {
                const shareText = `AIê°€ ë°œê²¬í•œ ë‚´ ë§ˆìŒ ì† ë¬¼ê±´ì€... [${resultTitle}]ì´ë˜ìš”! ğŸ˜² ë„ˆì˜ ë§ˆìŒ ì†ì—ëŠ” ì–´ë–¤ ë¬¼ê±´ì´ ìˆì„ê¹Œ?`;
                const shareUrl = window.location.href;

                // Web Share API (ëª¨ë°”ì¼ ìš°ì„ )
                if (navigator.share) {
                    document.getElementById('share-kakao').addEventListener('click', () => {
                        navigator.share({
                            title: 'ë§ˆìŒì˜ ë‚˜ì¹¨ë°˜',
                            text: shareText,
                            url: shareUrl,
                        }).catch(console.error);
                    });
                } else {
                    document.getElementById('share-kakao').style.display = 'none'; // ì§€ì› ì•ˆ í•˜ë©´ ì¹´í†¡ ë²„íŠ¼ ìˆ¨ê¹€
                }
                
                // ë§í¬ ë³µì‚¬ (í´ë°±)
                document.getElementById('copy-link').addEventListener('click', () => {
                    navigator.clipboard.writeText(shareUrl).then(() => {
                        alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”! ì¹œêµ¬ì—ê²Œ ê³µìœ í•´ë³´ì„¸ìš”.');
                    }).catch(err => {
                        console.error('Could not copy text: ', err);
                        alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”.');
                    });
                });
            }
        };
 
         document.addEventListener('DOMContentLoaded', () => { MindJourneyApp.initDOM(); });
     })()]];
     </script>
 </body>
 </html>
