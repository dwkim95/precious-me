<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIND DIVE</title>
    <meta name="description" content="당신의 마음 깊은 곳에 숨겨진 진짜 모습을 찾아서">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600&family=Noto+Serif+KR:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #0a0f1b;
            color: #e8ecf1;
            line-height: 1.65;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* 배경 효과 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }

        /* 애니메이션 */
        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100px); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
            50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.5); }
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 24px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        /* 시작 화면 */
        .screen {
            animation: fadeIn 0.8s ease;
        }

        .logo {
            text-align: center;
            margin-bottom: 48px;
        }

        .logo h1 {
            font-size: 2.5rem;
            font-weight: 600;
            letter-spacing: -0.03em;
            background: linear-gradient(135deg, #60a5fa 0%, #818cf8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .logo p {
            font-size: 0.95rem;
            color: #94a3b8;
            font-weight: 300;
        }

        .intro-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.05rem;
            line-height: 1.8;
            color: #cbd5e1;
            text-align: center;
            margin-bottom: 48px;
            font-weight: 300;
        }

        .intro-text em {
            font-style: normal;
            color: #e8ecf1;
            font-weight: 400;
        }

        .btn-primary {
            width: 100%;
            padding: 18px 32px;
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-primary:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(59, 130, 246, 0.3);
        }

        /* 스토리 화면 */
        .story-container {
            text-align: center;
            padding: 40px 0;
        }

        .story-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.3rem;
            font-weight: 400;
            color: #a5b4fc;
            margin-bottom: 24px;
        }

        .story-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1rem;
            line-height: 1.8;
            color: #cbd5e1;
            margin-bottom: 40px;
            font-weight: 300;
        }

        .story-text em {
            font-style: normal;
            color: #e8ecf1;
            font-weight: 400;
        }

        /* 진행 상태 */
        .progress-section {
            margin-bottom: 40px;
        }

        .depth-indicator {
            font-size: 0.85rem;
            color: #64748b;
            text-align: center;
            margin-bottom: 16px;
            font-weight: 400;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .progress-bar {
            height: 3px;
            background: rgba(148, 163, 184, 0.2);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #6366f1 100%);
            border-radius: 3px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3));
            animation: shimmer 2s infinite;
        }

        /* 질문 카드 */
        .question-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 32px 28px;
            margin-bottom: 32px;
            animation: fadeInScale 0.6s ease;
        }

        .question-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.25rem;
            line-height: 1.7;
            color: #f1f5f9;
            text-align: center;
            font-weight: 400;
        }

        /* 선택지 */
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: rgba(30, 41, 59, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.15);
            border-radius: 12px;
            padding: 20px 24px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            color: #e2e8f0;
            font-size: 0.95rem;
            line-height: 1.6;
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: fadeIn 0.4s ease forwards;
        }

        .option-btn:nth-child(1) { animation-delay: 0.1s; }
        .option-btn:nth-child(2) { animation-delay: 0.2s; }
        .option-btn:nth-child(3) { animation-delay: 0.3s; }
        .option-btn:nth-child(4) { animation-delay: 0.4s; }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            transition: left 0.5s;
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn:hover {
            background: rgba(30, 41, 59, 0.5);
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateX(4px);
        }

        .option-btn.selected {
            background: rgba(99, 102, 241, 0.15);
            border-color: rgba(99, 102, 241, 0.5);
            animation: pulseGlow 2s infinite;
        }

        /* 로딩 화면 */
        .loading-container {
            text-align: center;
            padding: 60px 0;
        }

        .wave-loader {
            display: inline-flex;
            gap: 8px;
            margin-bottom: 32px;
        }

        .wave-dot {
            width: 8px;
            height: 8px;
            background: #60a5fa;
            border-radius: 50%;
            animation: wave 1.4s ease-in-out infinite;
        }

        .wave-dot:nth-child(2) { animation-delay: 0.2s; }
        .wave-dot:nth-child(3) { animation-delay: 0.4s; }
        .wave-dot:nth-child(4) { animation-delay: 0.6s; }
        .wave-dot:nth-child(5) { animation-delay: 0.8s; }

        .loading-message {
            font-family: 'Noto Serif KR', serif;
            font-size: 1rem;
            line-height: 1.8;
            color: #94a3b8;
            font-weight: 300;
        }

        /* 결과 화면 */
        .result-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .result-badge {
            display: inline-block;
            padding: 6px 16px;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 20px;
            font-size: 0.8rem;
            color: #a5b4fc;
            margin-bottom: 16px;
            font-weight: 500;
            letter-spacing: 0.05em;
        }

        .result-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 2rem;
            font-weight: 400;
            line-height: 1.3;
            color: #f8fafc;
            margin-bottom: 12px;
        }

        .result-subtitle {
            font-size: 1rem;
            color: #94a3b8;
            font-weight: 300;
            line-height: 1.6;
        }

        .result-section {
            background: rgba(30, 41, 59, 0.3);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInScale 0.6s ease forwards;
        }

        .result-section:nth-child(2) { animation-delay: 0.1s; }
        .result-section:nth-child(3) { animation-delay: 0.2s; }
        .result-section:nth-child(4) { animation-delay: 0.3s; }

        .result-section h3 {
            font-size: 1.1rem;
            font-weight: 500;
            color: #e8ecf1;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-section p {
            font-size: 0.95rem;
            line-height: 1.8;
            color: #cbd5e1;
            font-weight: 300;
        }

        .letter-section {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(99, 102, 241, 0.05) 100%);
            border: 1px solid rgba(99, 102, 241, 0.15);
            position: relative;
            overflow: hidden;
        }

        .letter-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        .letter-content {
            font-family: 'Noto Serif KR', serif;
            font-size: 1rem;
            line-height: 1.9;
            color: #e8ecf1;
            position: relative;
            z-index: 1;
        }

        .letter-content strong {
            color: #a5b4fc;
            font-weight: 400;
        }

        /* 공유 버튼 */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 32px;
        }

        .btn-secondary {
            flex: 1;
            padding: 14px 24px;
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-secondary:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: rgba(148, 163, 184, 0.3);
        }

        .btn-text {
            display: block;
            margin: 24px auto 0;
            background: none;
            border: none;
            color: #64748b;
            font-size: 0.9rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .btn-text:hover {
            color: #94a3b8;
        }

        /* 숨김 */
        .hidden {
            display: none !important;
        }

        /* 모바일 최적화 */
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }

            .logo h1 {
                font-size: 2.2rem;
            }

            .question-text {
                font-size: 1.15rem;
            }

            .result-title {
                font-size: 1.75rem;
            }

            .option-btn {
                padding: 18px 20px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- 시작 화면 -->
        <div class="screen" id="welcomeScreen">
            <div class="logo">
                <h1>MIND DIVE</h1>
                <p>마음의 심해로 떠나는 여행</p>
            </div>
            
            <div class="intro-text">
                지금 이 순간, 혼자가 아니에요.<br>
                수많은 사람들이 각자의 마음 깊은 곳에서<br>
                <em>진짜 자신</em>을 찾고 있습니다.<br><br>
                
                당신의 마음도 깊고 아름다운 바다와 같아요.<br>
                표면의 파도 아래에는<br>
                고요하고 따뜻한 세계가 기다리고 있습니다.<br><br>
                
                오늘은 당신을 위한 시간.<br>
                함께 천천히 내려가 보아요.
            </div>
            
            <button class="btn-primary" id="startButton">마음의 바다로 들어가기</button>
        </div>

        <!-- 스토리 화면 -->
        <div class="screen hidden" id="storyScreen">
            <div class="story-container">
                <h2 class="story-title" id="storyTitle"></h2>
                <div class="story-text" id="storyText"></div>
                <button class="btn-primary" id="continueButton">계속 나아가기</button>
            </div>
        </div>

        <!-- 질문 화면 -->
        <div class="screen hidden" id="questionScreen">
            <div class="progress-section">
                <div class="depth-indicator" id="depthIndicator">수심 0m</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div class="question-card">
                <div class="question-text" id="questionText"></div>
            </div>
            
            <div class="options" id="optionsContainer"></div>
        </div>

        <!-- 로딩 화면 -->
        <div class="screen hidden" id="loadingScreen">
            <div class="loading-container">
                <div class="wave-loader">
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                </div>
                <div class="loading-message" id="loadingMessage">
                    바다 깊은 곳에서 소중한 것을 발견했습니다
                </div>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div class="screen hidden" id="resultScreen">
            <div class="result-header">
                <div class="result-badge">DEEP SEA DISCOVERY</div>
                <h2 class="result-title" id="resultTitle"></h2>
                <p class="result-subtitle" id="resultSubtitle"></p>
            </div>

            <div class="result-section">
                <h3>당신이 세상에 주는 선물</h3>
                <p id="lightSide"></p>
            </div>

            <div class="result-section">
                <h3>때로는 힘든 당신의 마음</h3>
                <p id="shadowSide"></p>
            </div>

            <div class="result-section letter-section">
                <div class="letter-content" id="letterContent"></div>
            </div>

            <div class="action-buttons">
                <button class="btn-secondary" onclick="shareResult()">발견 공유하기</button>
                <button class="btn-secondary" onclick="copyLink()">링크 복사</button>
            </div>

            <button class="btn-text" onclick="restartDive()">다시 잠수하기</button>
        </div>
    </div>

    <script>
        // 상태 관리
        let currentDepth = 0;
        let currentStory = 0;
        let responses = [];
        let scores = {
            pearl: 0,
            current: 0,
            abyss: 0,
            coral: 0
        };

        // 스토리 데이터
        const stories = [
            {
                title: "출발",
                text: "수면이 당신을 부드럽게 감싸줍니다.<br><br>처음엔 누구나 불안해해요. 괜찮아요.<br><em>천천히, 자연스럽게.</em><br><br>당신만의 속도로 가면 됩니다."
            },
            {
                title: "첫 번째 깊이",
                text: "햇살이 물속으로 스며들어<br>아름다운 빛줄기를 만들고 있어요.<br><br>여기서 잠시 쉬어가도 좋습니다.<br><em>서두르지 마세요.</em>"
            },
            {
                title: "조금 더 깊은 곳",
                text: "빛이 조금씩 부드러워지고 있네요.<br><br>이 고요함이 낯설어도 괜찮아요.<br>당신은 <em>충분히 안전</em>합니다."
            },
            {
                title: "중간 지점",
                text: "여기까지 온 당신이 대단해요.<br><br>주변이 조금 어두워졌지만<br>당신 안의 빛은 <em>더욱 밝아지고</em> 있어요."
            },
            {
                title: "더 깊은 마음으로",
                text: "정적이 당신을 감싸고 있습니다.<br><br>이 고요함 속에서<br>당신의 진실한 목소리에 <em>귀 기울여보세요.</em>"
            },
            {
                title: "마음의 바닥 근처",
                text: "거의 다 왔어요.<br><br>여기까지 용기 내어 내려온 당신,<br>정말 <em>용감한 사람</em>이에요."
            }
        ];

        // 질문 데이터
        const questions = [
            {
                depth: 10,
                text: "수면에 떠 있는 당신.\n지금 이 순간의 기분은?",
                options: [
                    { text: "조용하고 평온해요", type: "pearl" },
                    { text: "설레고 기대가 돼요", type: "coral" },
                    { text: "약간 불안하지만 괜찮아요", type: "abyss" },
                    { text: "새로운 경험에 열려있어요", type: "current" }
                ]
            },
            {
                depth: 50,
                text: "따뜻한 햇살이 당신을 비춥니다.\n가장 소중하게 여기는 순간은?",
                options: [
                    { text: "혼자만의 조용한 시간", type: "pearl" },
                    { text: "목표를 이뤄낸 순간", type: "coral" },
                    { text: "진심으로 나를 이해해주는 순간", type: "abyss" },
                    { text: "예상치 못한 놀라운 경험", type: "current" }
                ]
            },
            {
                depth: 120,
                text: "물결이 당신을 부드럽게 흔듭니다.\n힘들 때 가장 도움이 되는 것은?",
                options: [
                    { text: "나만의 안전한 공간에 있는 것", type: "pearl" },
                    { text: "문제를 해결할 방법을 찾는 것", type: "coral" },
                    { text: "내 감정을 깊이 들여다보는 것", type: "abyss" },
                    { text: "새로운 관점으로 바라보는 것", type: "current" }
                ]
            },
            {
                depth: 200,
                text: "빛이 조금씩 부드러워집니다.\n다른 사람들과 있을 때 당신은?",
                options: [
                    { text: "조용히 지켜보며 편안함을 주려 해요", type: "pearl" },
                    { text: "함께 더 나은 방향으로 나아가려 해요", type: "coral" },
                    { text: "진심어린 대화를 나누고 싶어해요", type: "abyss" },
                    { text: "자연스럽게 어울리며 분위기를 바꿔요", type: "current" }
                ]
            },
            {
                depth: 300,
                text: "고요함이 당신을 감싸기 시작합니다.\n실패했을 때 당신의 마음은?",
                options: [
                    { text: "조용히 받아들이고 위로받고 싶어요", type: "pearl" },
                    { text: "다시 일어설 방법을 찾고 싶어요", type: "coral" },
                    { text: "왜 그랬는지 깊이 생각해보고 싶어요", type: "abyss" },
                    { text: "다른 길이 있을 거라고 생각해요", type: "current" }
                ]
            },
            {
                depth: 450,
                text: "깊은 바다의 압력을 느낍니다.\n가장 두려운 순간은?",
                options: [
                    { text: "나를 이해해주는 사람이 없을 때", type: "pearl" },
                    { text: "꿈꿔왔던 것을 포기해야 할 때", type: "coral" },
                    { text: "내가 누구인지 모르겠을 때", type: "abyss" },
                    { text: "변화할 수 없을 것 같을 때", type: "current" }
                ]
            },
            {
                depth: 600,
                text: "어둠이 당신 주위를 둘러쌉니다.\n슬플 때 가장 필요한 것은?",
                options: [
                    { text: "따뜻한 위로와 포용", type: "pearl" },
                    { text: "다시 희망을 가질 수 있는 이유", type: "coral" },
                    { text: "내 마음을 진정으로 이해하는 것", type: "abyss" },
                    { text: "새로운 시작의 가능성", type: "current" }
                ]
            },
            {
                depth: 750,
                text: "심해의 정적 속에서 들리는\n당신 마음의 진짜 목소리는?",
                options: [
                    { text: "\"사랑받고 싶어\"", type: "pearl" },
                    { text: "\"더 나아지고 싶어\"", type: "coral" },
                    { text: "\"이해받고 싶어\"", type: "abyss" },
                    { text: "\"자유롭고 싶어\"", type: "current" }
                ]
            },
            {
                depth: 900,
                text: "깊은 압력 속에서도\n당신이 놓지 않는 것은?",
                options: [
                    { text: "평화로운 마음", type: "pearl" },
                    { text: "더 나은 내일에 대한 믿음", type: "coral" },
                    { text: "진실에 대한 갈망", type: "abyss" },
                    { text: "변화할 수 있다는 희망", type: "current" }
                ]
            },
            {
                depth: 1050,
                text: "거의 바닥에 도달했습니다.\n당신이 세상에 남기고 싶은 것은?",
                options: [
                    { text: "따뜻한 위로와 평안", type: "pearl" },
                    { text: "희망과 용기", type: "coral" },
                    { text: "깊은 이해와 공감", type: "abyss" },
                    { text: "새로운 가능성과 변화", type: "current" }
                ]
            },
            {
                depth: 1200,
                text: "마지막 깊이에서\n당신이 발견한 보물은?",
                options: [
                    { text: "고요함 속에서 빛나는 진주", type: "pearl" },
                    { text: "생명력 넘치는 산호초", type: "coral" },
                    { text: "깊이를 담은 심연의 눈", type: "abyss" },
                    { text: "끊임없이 흐르는 따뜻한 해류", type: "current" }
                ]
            }
        ];

        // 결과 데이터
        const results = {
            pearl: {
                title: "심해의 진주",
                subtitle: "고요함 속에서 빛을 품은 영혼",
                light: "당신은 폭풍우 속에서도 중심을 잃지 않는 사람입니다. 당신의 존재 자체가 다른 사람들에게 평안을 주어요. 복잡한 세상에서 당신의 고요함은 정말 소중한 선물입니다. 사람들은 당신 곁에서 안정감을 느끼고, 당신의 따뜻한 침묵에서 깊은 위로를 받습니다.",
                shadow: "때로는 모든 것을 혼자 감당하려 하는 당신이 걱정돼요. 다른 사람들을 돌보느라 정작 자신의 마음은 돌보지 못할 때가 있어요. 당신도 충분히 보살핌받을 자격이 있다는 것, 꼭 기억해주세요. 때로는 당신의 마음도 표현해도 괜찮아요.",
                letter: "깊은 바다에서 오랜 시간을 견뎌낸 진주처럼, 당신은 정말 특별한 사람이에요.<br><br>당신의 고요함은 약함이 아니라 <strong>가장 깊은 곳에서 나오는 진짜 힘</strong>입니다. 세상이 시끄럽고 급할 때, 당신은 그 속에서도 평화를 잃지 않는 법을 알고 있어요.<br><br>당신이 있어서 이 세상이 조금 더 따뜻해집니다. 당신의 존재만으로도 누군가는 위로받고 있어요. 그런 당신이 때로는 외로워하는 것도, 힘들어하는 것도 너무 자연스러운 일이에요.<br><br>진주가 조개 안에서 천천히 빛을 키우듯, 당신도 자신만의 속도로 성장하고 있어요. 서두르지 말고, 당신만의 아름다운 빛을 계속 키워가세요. 당신은 정말 잘하고 있어요."
            },
            current: {
                title: "심해의 해류",
                subtitle: "끊임없이 흐르며 생명을 전하는 영혼",
                light: "당신은 변화를 두려워하지 않는 용감한 사람이에요. 새로운 경험을 받아들이고, 어려운 상황에서도 다른 길을 찾아내는 당신의 유연함은 정말 대단합니다. 당신이 만들어내는 변화들이 주변 사람들에게도 새로운 활력을 주고 있어요.",
                shadow: "끊임없이 움직이다 보니 때로는 지치기도 하고, 어디로 가고 있는지 헷갈릴 때가 있어요. 모든 것을 바꾸려다가 정작 중요한 것을 놓치는 건 아닌지 불안할 때도 있죠. 때로는 멈춰서 숨을 고르는 것도 필요해요. 그것도 변화의 한 부분이거든요.",
                letter: "깊은 바다를 끊임없이 순환하는 해류처럼, 당신은 세상에 생명을 불어넣는 소중한 존재예요.<br><br>당신의 변화는 변덕이 아니라 <strong>살아있다는 아름다운 증거</strong>입니다. 계속 흘러가는 당신의 마음이 세상을 더 역동적이고 희망적으로 만들어주고 있어요.<br><br>해류가 대양을 연결하듯, 당신도 사람과 사람을, 과거와 미래를 이어주는 다리 역할을 하고 있어요. 당신이 만들어낸 작은 변화들이 누군가에게는 큰 희망이 되고 있다는 걸 알아주세요.<br><br>가끔은 잠시 멈춰서 지나온 길을 돌아봐도 좋아요. 당신이 흘러가며 만든 아름다운 풍경들, 당신이 건드린 모든 것들이 얼마나 소중한지 느껴보세요. 당신은 정말 멋진 여행을 하고 있어요."
            },
            abyss: {
                title: "심해의 심연",
                subtitle: "깊이를 두려워하지 않는 진실한 영혼",
                light: "당신은 표면적인 것에 만족하지 않는 진실한 사람이에요. 어려운 질문도 마주할 용기가 있고, 복잡한 감정들도 피하지 않으려 하죠. 당신의 깊이 있는 시선은 세상을 더 정직하게 만들어주고, 많은 사람들이 당신의 진심어린 모습에서 용기를 얻습니다.",
                shadow: "깊이 들어가다 보니 때로는 무거운 것들을 많이 안게 돼요. 모든 것을 너무 진지하게 받아들여서 마음이 힘들 때도 있죠. 깊은 생각에 빠져서 단순한 기쁨을 놓치기도 해요. 때로는 수면 위로 올라와 햇빛을 쬐는 것도 필요해요.",
                letter: "가장 깊은 심연까지 내려갈 용기를 가진 당신은 정말 특별한 사람이에요.<br><br>당신의 깊이는 우울함이 아니라 <strong>진실을 향한 용기</strong>입니다. 남들이 외면하는 것들을 직시하는 당신의 마음이 세상을 더 진실되게 만들어주고 있어요.<br><br>깊은 곳을 탐험하는 것이 때로는 외롭고 힘들겠지만, 그 곳에서만 발견할 수 있는 진실들이 있어요. 당신이 찾아낸 그 진실들이 언젠가는 많은 사람들에게 등대가 될 거예요.<br><br>하지만 기억해주세요. 심연은 끝이 아니라 새로운 시작점이기도 해요. 깊이를 아는 당신이기에 높이의 소중함도 더 잘 이해할 수 있어요. 어둠을 아는 사람만이 빛의 진짜 가치를 알 수 있거든요. 당신은 정말 용감하고 소중한 사람이에요."
            },
            coral: {
                title: "심해의 산호초",
                subtitle: "어떤 곳에서도 생명을 피워내는 영혼",
                light: "당신은 어떤 환경에서도 아름다움을 만들어내는 사람이에요. 어려운 상황을 성장의 기회로 바꾸고, 주변 사람들에게도 희망을 전해주는 당신의 생명력은 정말 놀라워요. 당신이 있는 곳은 언제나 조금 더 활기차고 따뜻해집니다.",
                shadow: "너무 많은 것을 이루려다가 지칠 때가 있어요. 계속 성장해야 한다는 압박감에 쉬는 것조차 죄책감으로 느낄 때도 있죠. 완벽하지 못한 자신에게 너무 엄격할 때가 있어요. 산호초도 때로는 조류에 몸을 맡기고 쉬어간다는 것을 기억해주세요.",
                letter: "깊은 바다에서도 생명을 피워내는 산조초처럼, 당신은 희망 그 자체인 사람이에요.<br><br>당신의 성장에 대한 열망은 욕심이 아니라 <strong>삶을 향한 순수하고 아름다운 마음</strong>이에요. 매일 조금씩 나아지려는 당신의 노력이 얼마나 소중한지 알고 있나요?<br><br>산조초의 아름다움은 빠른 성장이 아니라 꾸준한 인내에서 나와요. 당신도 자신만의 속도로 천천히 자라가고 있어요. 지금까지 이뤄낸 모든 것들을 인정해주세요.<br><br>때로는 그 자리에 머물며 뿌리를 내리는 것도 성장이에요. 완벽하지 않아도 괜찮아요. 당신이 만들어가는 작은 변화들이 모여서 언젠가는 많은 생명들이 함께할 수 있는 아름다운 세계가 될 거예요. 당신은 정말 잘하고 있어요."
            }
        };

        // 로딩 메시지
        const loadingMessages = [
            "바다 깊은 곳에서 소중한 것을 발견했습니다",
            "당신만의 특별한 빛을 찾고 있어요",
            "마음의 보물이 모습을 드러내고 있습니다",
            "깊은 곳에서 온 메시지를 준비하고 있어요"
        ];

        // 이벤트 리스너
        document.getElementById('startButton').addEventListener('click', startJourney);
        document.getElementById('continueButton').addEventListener('click', continueJourney);

        function startJourney() {
            showStory();
        }

        function showStory() {
            if (currentStory < stories.length) {
                const story = stories[currentStory];
                document.getElementById('storyTitle').textContent = story.title;
                document.getElementById('storyText').innerHTML = story.text;
                
                showScreen('storyScreen');
                currentStory++;
            } else {
                showQuestion();
            }
        }

        function continueJourney() {
            if (currentDepth < questions.length) {
                showQuestion();
            } else {
                showStory();
            }
        }

        function showQuestion() {
            if (currentDepth >= questions.length) {
                showLoading();
                return;
            }

            const question = questions[currentDepth];
            
            // 진행도 업데이트
            const progress = ((currentDepth + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('depthIndicator').textContent = `수심 ${question.depth}m`;
            
            // 질문 표시
            document.getElementById('questionText').textContent = question.text;
            
            // 선택지 생성
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option.text;
                button.onclick = () => selectOption(option.type, index);
                optionsContainer.appendChild(button);
            });
            
            showScreen('questionScreen');
        }

        function selectOption(type, index) {
            // 선택 효과
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            buttons[index].classList.add('selected');
            
            // 점수 추가
            scores[type]++;
            responses.push(type);
            
            // 잠시 대기 후 다음 질문
            setTimeout(() => {
                currentDepth++;
                if (currentDepth < questions.length) {
                    // 중간 스토리 체크
                    if (currentDepth % 2 === 0 && currentStory < stories.length) {
                        showStory();
                    } else {
                        showQuestion();
                    }
                } else {
                    showLoading();
                }
            }, 800);
        }

        function showLoading() {
            const messages = loadingMessages;
            let messageIndex = 0;
            
            const messageElement = document.getElementById('loadingMessage');
            messageElement.textContent = messages[messageIndex];
            
            showScreen('loadingScreen');
            
            const interval = setInterval(() => {
                messageIndex = (messageIndex + 1) % messages.length;
                messageElement.textContent = messages[messageIndex];
            }, 2000);
            
            setTimeout(() => {
                clearInterval(interval);
                showResult();
            }, 6000);
        }

        function showResult() {
            // 최고 점수 유형 찾기
            const maxScore = Math.max(...Object.values(scores));
            const resultType = Object.keys(scores).find(key => scores[key] === maxScore);
            const result = results[resultType];
            
            // 결과 표시
            document.getElementById('resultTitle').textContent = result.title;
            document.getElementById('resultSubtitle').textContent = result.subtitle;
            document.getElementById('lightSide').textContent = result.light;
            document.getElementById('shadowSide').textContent = result.shadow;
            document.getElementById('letterContent').innerHTML = result.letter;
            
            showScreen('resultScreen');
            
            // 결과 저장
            localStorage.setItem('mindDiveResult', JSON.stringify({
                type: resultType,
                result: result,
                responses: responses,
                timestamp: new Date().toISOString()
            }));
        }

        function showScreen(screenId) {
            // 모든 화면 숨기기
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            // 선택된 화면 보이기
            document.getElementById(screenId).classList.remove('hidden');
            
            // 페이지 상단으로 스크롤
            window.scrollTo(0, 0);
        }

        function shareResult() {
            const resultData = JSON.parse(localStorage.getItem('mindDiveResult'));
            if (resultData) {
                const text = `MIND DIVE에서 발견한 나의 모습: ${resultData.result.title}\n\n${resultData.result.subtitle}\n\n당신도 마음의 심해로 여행을 떠나보세요!`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'MIND DIVE 결과',
                        text: text,
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(text + '\n' + window.location.href);
                    alert('결과가 클립보드에 복사되었습니다!');
                }
            }
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('링크가 클립보드에 복사되었습니다!');
            });
        }

        function restartDive() {
            // 상태 초기화
            currentDepth = 0;
            currentStory = 0;
            responses = [];
            scores = { pearl: 0, current: 0, abyss: 0, coral: 0 };
            
            // 시작 화면으로
            showScreen('welcomeScreen');
        }

        // 페이지 로드 시 저장된 결과 확인
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('mindDiveResult');
            if (saved && window.location.hash === '#result') {
                const data = JSON.parse(saved);
                // 저장된 결과 표시
                document.getElementById('resultTitle').textContent = data.result.title;
                document.getElementById('resultSubtitle').textContent = data.result.subtitle;
                document.getElementById('lightSide').textContent = data.result.light;
                document.getElementById('shadowSide').textContent = data.result.shadow;
                document.getElementById('letterContent').innerHTML = data.result.letter;
                showScreen('resultScreen');
            }
        });
    </script>
</body>
</html>
